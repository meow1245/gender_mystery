<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€§åˆ¥è­°é¡ŒåŠ‡æœ¬æ®º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
            padding: 40px;
            max-height: 90vh;
            overflow-y: auto;
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px 5px;
            width: calc(50% - 10px);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        button.full-width {
            width: 100%;
        }

        .character-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }

        .character-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .player-list {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .player-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .message {
            background: white;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message .sender {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .message .private {
            color: #e74c3c;
            font-size: 0.9em;
        }

        .vote-section {
            background: #fff3cd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .vote-button {
            background: #dc3545;
            margin: 5px;
            width: calc(33.33% - 10px);
        }

        .vote-button:hover {
            background: #c82333;
        }

        .vote-button.voted {
            background: #6c757d;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
        }

        .room-size-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .room-size-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .room-size-btn:hover, .room-size-btn.selected {
            background: #667eea;
            color: white;
        }

        .script-type-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .script-card {
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .script-card:hover, .script-card.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .script-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .script-card .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85em;
            margin-top: 10px;
        }

        .badge-teen {
            background: #28a745;
            color: white;
        }

        .badge-adult {
            background: #dc3545;
            color: white;
        }

        .script-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .script-option {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .script-option:hover, .script-option.selected {
            border-color: #667eea;
            background: #f0f4ff;
            transform: translateX(5px);
        }

        .script-option h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .script-option p {
            color: #666;
            font-size: 0.95em;
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .script-meta {
            display: flex;
            gap: 10px;
            margin-top: 12px;
        }

        .script-meta .tag {
            background: #e9ecef;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            color: #495057;
        }

        .script-meta .tag.duration {
            background: #fff3cd;
            color: #856404;
        }

        .script-meta .tag.difficulty {
            background: #d1ecf1;
            color: #0c5460;
        }

        .discussion-questions {
            background: #e7f3ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .discussion-questions h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .discussion-questions ul {
            margin-left: 20px;
        }

        .discussion-questions li {
            margin: 8px 0;
            line-height: 1.6;
        }

        .timer {
            text-align: center;
            font-size: 1.5em;
            color: #667eea;
            margin: 15px 0;
            font-weight: bold;
        }

        .character-portrait {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin: 15px auto;
            display: block;
            border: 4px solid #667eea;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .final-image {
            width: 100%;
            max-width: 600px;
            border-radius: 12px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(102, 126, 234, 0.9);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
            z-index: 1000;
        }

        .music-control:hover {
            transform: scale(1.1);
            background: rgba(118, 75, 162, 0.9);
        }

        .day-indicator {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: bold;
        }

        .phase-info {
            background: #e7f3ff;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
            color: #0c5460;
            font-weight: bold;
        }

        .event-card {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .event-card h4 {
            color: #856404;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ­ æ€§åˆ¥è­°é¡ŒåŠ‡æœ¬æ®º</h1>

        <!-- éŸ³æ¨‚æ§åˆ¶æŒ‰éˆ• -->
        <button class="music-control" id="musicToggle" onclick="toggleMusic()">ğŸ”Š</button>

        <!-- é¦–é  -->
        <div id="homeScreen" class="screen active">
            <div class="input-group">
                <label>ä½ çš„åå­—</label>
                <input type="text" id="playerName" placeholder="è¼¸å…¥ä½ çš„åå­—">
            </div>
            <button onclick="showCreateRoom()" class="full-width">å‰µå»ºæˆ¿é–“</button>
            <button onclick="showJoinRoom()" class="full-width">åŠ å…¥æˆ¿é–“</button>
        </div>

        <!-- å‰µå»ºæˆ¿é–“ - é¸æ“‡é¡å‹ -->
        <div id="createRoomScreen" class="screen">
            <h2 style="margin-bottom: 20px;">å‰µå»ºæˆ¿é–“ - é¸æ“‡åŠ‡æœ¬é¡å‹</h2>
            
            <label>é¸æ“‡åŠ‡æœ¬é¡å‹</label>
            <div class="script-type-selector">
                <div class="script-card" onclick="selectScriptType('teen')">
                    <h3>ğŸ“š æœªæˆå¹´åŠ‡æœ¬</h3>
                    <p style="font-size: 0.9em; color: #666;">æ ¡åœ’æ•…äº‹ã€è¨è«–å°å‘<br>é‡åœ¨åæ€èˆ‡æ•™è‚²</p>
                    <span class="badge badge-teen">æ•™è‚²æ€§è³ª</span>
                </div>
                <div class="script-card" onclick="selectScriptType('adult')">
                    <h3>ğŸ” æˆå¹´åŠ‡æœ¬</h3>
                    <p style="font-size: 0.9em; color: #666;">æ¨ç†å°å‘ã€ç©å®¶å¯èƒ½æ˜¯å£äºº<br>æ·±åº¦è­°é¡Œæ¢è¨</p>
                    <span class="badge badge-adult">æ¨ç†æ€§è³ª</span>
                </div>
            </div>

            <button onclick="backToHome()" class="full-width" style="background: #6c757d;">è¿”å›</button>
        </div>

        <!-- å‰µå»ºæˆ¿é–“ - é¸æ“‡äººæ•¸ -->
        <div id="selectPlayerCountScreen" class="screen">
            <h2 style="margin-bottom: 20px;">é¸æ“‡æˆ¿é–“äººæ•¸</h2>
            
            <div class="room-size-selector">
                <button class="room-size-btn" onclick="selectRoomSize(3)">3äºº</button>
                <button class="room-size-btn" onclick="selectRoomSize(4)">4äºº</button>
                <button class="room-size-btn" onclick="selectRoomSize(5)">5äºº</button>
                <button class="room-size-btn" onclick="selectRoomSize(6)">6äºº</button>
            </div>

            <button onclick="backToScriptType()" class="full-width" style="background: #6c757d;">è¿”å›</button>
        </div>

        <!-- å‰µå»ºæˆ¿é–“ - é¸æ“‡åŠ‡æœ¬ -->
        <div id="selectScriptScreen" class="screen">
            <h2 style="margin-bottom: 20px;">é¸æ“‡åŠ‡æœ¬</h2>
            
            <div class="script-list" id="scriptList"></div>

            <button onclick="backToPlayerCount()" class="full-width" style="background: #6c757d;">è¿”å›</button>
        </div>

        <!-- åŠ å…¥æˆ¿é–“ -->
        <div id="joinRoomScreen" class="screen">
            <h2 style="margin-bottom: 20px;">åŠ å…¥æˆ¿é–“</h2>
            <div class="input-group">
                <label>æˆ¿é–“ä»£ç¢¼</label>
                <input type="text" id="roomCode" placeholder="è¼¸å…¥6ä½æˆ¿é–“ä»£ç¢¼" maxlength="6" style="text-transform: uppercase;">
            </div>
            <button onclick="joinRoom()" class="full-width">åŠ å…¥éŠæˆ²</button>
            <button onclick="backToHome()" class="full-width" style="background: #6c757d;">è¿”å›</button>
        </div>

        <!-- ç­‰å€™å®¤ -->
        <div id="lobbyScreen" class="screen">
            <div class="alert alert-info">
                <strong>ğŸ® æˆ¿é–“ä»£ç¢¼ï¼š<span id="displayRoomCode"></span></strong>
                <p>åŠ‡æœ¬ï¼š<span id="displayScriptName"></span></p>
                <p>äººæ•¸ï¼š<span id="currentPlayers">0</span>/<span id="maxPlayers">0</span> | é è¨ˆæ™‚é•·ï¼š<span id="displayDuration"></span></p>
            </div>

            <div class="player-list">
                <h3>ç©å®¶åˆ—è¡¨</h3>
                <div id="playersList"></div>
            </div>

            <div id="hostControls" style="display:none;">
                <button onclick="startGame()" class="full-width">é–‹å§‹éŠæˆ²</button>
            </div>
            <button onclick="leaveRoom()" class="full-width" style="background: #dc3545;">é›¢é–‹æˆ¿é–“</button>
        </div>

        <!-- éŠæˆ²ç•«é¢ -->
        <div id="gameScreen" class="screen">
            <div class="day-indicator" id="dayIndicator">ç¬¬ä¸€å¤©</div>
            <div class="phase-info" id="phaseInfo">æ—©æ™¨ - è‡ªç”±è¨è«–æ™‚é–“</div>

            <div class="character-card">
                <img id="characterPortrait" class="character-portrait" src="" alt="è§’è‰²åœ–ç‰‡" style="display:none;">
                <h3>ä½ çš„è§’è‰²ï¼š<span id="characterName"></span></h3>
                <p><strong>èƒŒæ™¯ï¼š</strong><span id="characterBackground"></span></p>
                <p style="margin-top: 10px;"><strong>ä½ çš„ç§˜å¯†ï¼š</strong><span id="characterSecret"></span></p>
                <p id="characterGoal" style="margin-top: 10px; color: #e74c3c;"></p>
            </div>

            <div class="event-card" id="eventCard" style="display:none;">
                <h4>ğŸ“¢ æ–°äº‹ä»¶ç™¼ç”Ÿ</h4>
                <p id="eventContent"></p>
            </div>

            <div class="discussion-questions" id="discussionQuestions">
                <h4>ğŸ’­ è¨è«–æ–¹å‘</h4>
                <ul id="questionList"></ul>
            </div>

            <div class="timer" id="timer"></div>

            <div class="chat-container" id="chatContainer"></div>

            <div class="input-group">
                <textarea id="messageInput" placeholder="è¼¸å…¥è¨Šæ¯..." rows="2"></textarea>
                <select id="messageType">
                    <option value="public">å…¬é–‹ç™¼è¨€</option>
                    <option value="private">ç§å¯†è¨Šæ¯</option>
                </select>
            </div>
            <button onclick="sendMessage()" class="full-width">ç™¼é€è¨Šæ¯</button>

            <div class="vote-section" id="voteSection" style="display:none;">
                <h3>ğŸ—³ï¸ æŠ•ç¥¨ç’°ç¯€</h3>
                <p id="votePrompt"></p>
                <div id="voteButtons"></div>
            </div>

            <div id="gameResult" style="display:none;"></div>
        </div>
    </div>

    <script type="module">
        // âš ï¸ é‡è¦ï¼šè«‹æ›¿æ›æˆä½ çš„ Firebase é…ç½®
        // å¦‚ä½•å–å¾—é…ç½®ï¼š
        // 1. å‰å¾€ https://console.firebase.google.com/
        // 2. é¸æ“‡ä½ çš„å°ˆæ¡ˆ
        // 3. é»æ“Šè¨­å®šï¼ˆé½’è¼ªåœ–ç¤ºï¼‰> å°ˆæ¡ˆè¨­å®š
        // 4. åœ¨ã€Œä½ çš„æ‡‰ç”¨ç¨‹å¼ã€å€å¡Šä¸­æ‰¾åˆ°ã€ŒSDK è¨­å®šå’Œè¨­å®šã€
        // 5. è¤‡è£½ firebaseConfig ç‰©ä»¶
        const firebaseConfig = {
  apiKey: "AIzaSyDUnkom6smuEJZrYHtpNYaikuZG6nsobHs",
  authDomain: "gendermystery-67902.firebaseapp.com",
  databaseURL: "https://gendermystery-67902-default-rtdb.firebaseio.com",
  projectId: "gendermystery-67902",
  storageBucket: "gendermystery-67902.firebasestorage.app",
  messagingSenderId: "962887682580",
  appId: "1:962887682580:web:e3504cbb32affdfe837501"
};


        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, push, onValue, remove, update, get, onDisconnect } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        let app, database;
        let currentRoomId = null;
        let currentPlayerId = null;
        let currentPlayerName = null;
        let isHost = false;
        let selectedRoomSize = null;
        let selectedScriptType = null;
        let selectedScript = null;
        let phaseTimer = null;
        let hasVoted = false;
        let currentMusic = null;
        let isMusicPlaying = true;

        // éŸ³æ¨‚é…ç½® - ä½¿ç”¨å…è²»çš„éŸ³æ¨‚åº«URLï¼ˆä½ éœ€è¦æ›¿æ›æˆå¯¦éš›çš„éŸ³æ¨‚æ–‡ä»¶URLï¼‰
        const MUSIC_TRACKS = {
            home: 'https://cdn.pixabay.com/audio/2022/03/10/audio_2c84830d98.mp3', // é¦–é è¼•é¬†éŸ³æ¨‚
            lobby: 'https://cdn.pixabay.com/audio/2022/05/27/audio_1808fbf07a.mp3', // ç­‰å€™å®¤æº«é¦¨éŸ³æ¨‚
            teen_casual: 'https://cdn.pixabay.com/audio/2022/03/24/audio_c8a7d5d141.mp3', // æœªæˆå¹´åŠ‡æœ¬ - è¼•å¿«
            teen_serious: 'https://cdn.pixabay.com/audio/2021/08/04/audio_0625c1539c.mp3', // æœªæˆå¹´åŠ‡æœ¬ - åš´è‚…
            adult_mystery: 'https://cdn.pixabay.com/audio/2022/05/11/audio_3f3c8685f1.mp3', // æˆå¹´åŠ‡æœ¬ - æ‡¸ç–‘
            adult_dark: 'https://cdn.pixabay.com/audio/2022/03/20/audio_998319e8bc.mp3', // æˆå¹´åŠ‡æœ¬ - é»‘æš—
            victory: 'https://cdn.pixabay.com/audio/2021/08/04/audio_bb630cc098.mp3', // å‹åˆ©éŸ³æ¨‚
        };

        // åœ–ç‰‡é…ç½® - ä½ éœ€è¦æº–å‚™ä¸¦ä¸Šå‚³é€™äº›åœ–ç‰‡
        const IMAGE_BASE_URL = 'https://your-image-host.com/'; // æ›¿æ›æˆä½ çš„åœ–ç‰‡è¨—ç®¡URL

        // åˆå§‹åŒ– Firebase
        function initializeFirebase() {
            try {
                // æª¢æŸ¥é…ç½®æ˜¯å¦å·²ä¿®æ”¹
                if (firebaseConfig.apiKey === "") {
                    alert('âš ï¸ è«‹å…ˆåœ¨ä»£ç¢¼ä¸­è¨­ç½®ä½ çš„ Firebase é…ç½®ï¼\n\nè«‹åƒè€ƒä»£ç¢¼é–‹é ­çš„è¨»è§£èªªæ˜ã€‚');
                    return false;
                }
                
                app = initializeApp(firebaseConfig);
                database = getDatabase(app);
                console.log('âœ… Firebase åˆå§‹åŒ–æˆåŠŸ');
                
                // æ’­æ”¾é¦–é éŸ³æ¨‚
                playMusic('home');
                return true;
            } catch (error) {
                console.error('âŒ Firebase åˆå§‹åŒ–å¤±æ•—:', error);
                alert('Firebase åˆå§‹åŒ–å¤±æ•—ï¼š' + error.message + '\n\nè«‹ç¢ºèªï¼š\n1. Firebase é…ç½®æ˜¯å¦æ­£ç¢º\n2. Realtime Database æ˜¯å¦å·²å•Ÿç”¨\n3. ç¶²è·¯é€£ç·šæ˜¯å¦æ­£å¸¸');
                return false;
            }
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            if (firebaseConfig.apiKey === "AIzaSyDUnkom6smuEJZrYHtpNYaikuZG6nsobHs") {
                // é¡¯ç¤ºé…ç½®è­¦å‘Š
                document.getElementById('configWarning').style.display = 'block';
                
                // ç¦ç”¨æ‰€æœ‰æŒ‰éˆ•
                const buttons = document.querySelectorAll('button');
                buttons.forEach(btn => {
                    if (!btn.id || btn.id !== 'musicToggle') {
                        btn.disabled = true;
                        btn.style.opacity = '0.5';
                    }
                });
            }
        });

        if (!initializeFirebase()) {
            // åˆå§‹åŒ–å¤±æ•—çš„é¡å¤–è™•ç†å·²åœ¨ initializeFirebase å‡½æ•¸ä¸­å®Œæˆ
        }

        // éŸ³æ¨‚æ§åˆ¶å‡½æ•¸
        function playMusic(trackName) {
            if (currentMusic) {
                currentMusic.pause();
                currentMusic = null;
            }

            if (!isMusicPlaying) return;

            const trackUrl = MUSIC_TRACKS[trackName];
            if (trackUrl) {
                currentMusic = new Audio(trackUrl);
                currentMusic.loop = true;
                currentMusic.volume = 0.3;
                currentMusic.play().catch(err => {
                    console.log('éŸ³æ¨‚æ’­æ”¾å¤±æ•—ï¼ˆå¯èƒ½éœ€è¦ç”¨æˆ¶äº’å‹•ï¼‰:', err);
                });
            }
        }

        window.toggleMusic = function() {
            const btn = document.getElementById('musicToggle');
            isMusicPlaying = !isMusicPlaying;
            
            if (isMusicPlaying) {
                btn.textContent = 'ğŸ”Š';
                // é‡æ–°æ’­æ”¾ç•¶å‰å ´æ™¯çš„éŸ³æ¨‚
                const screen = document.querySelector('.screen.active');
                if (screen.id === 'homeScreen') playMusic('home');
                else if (screen.id === 'lobbyScreen') playMusic('lobby');
            } else {
                btn.textContent = 'ğŸ”‡';
                if (currentMusic) {
                    currentMusic.pause();
                }
            }
        };

        // åŠ‡æœ¬æ•¸æ“šåº«
        const SCRIPTS = {
            teen: {
                3: [
                    {
                        id: "teen_3_bullying",
                        title: "æ ¡åœ’çš„è²éŸ³",
                        description: "æŸä¸­å­¸ç™¼ç”Ÿè¨€èªéœ¸å‡Œäº‹ä»¶ï¼Œå°è‡´å¥³å­¸ç”Ÿè½‰å­¸ã€‚æ¢è¨æ—è§€è€…è²¬ä»»èˆ‡èªè¨€æš´åŠ›ã€‚",
                        duration: "20åˆ†é˜",
                        days: 1,
                        difficulty: "å…¥é–€",
                        background: "æŸä¸­å­¸ç™¼ç”Ÿäº†ä¸€èµ·å¥³å­¸ç”Ÿé­å—è¨€èªéœ¸å‡Œçš„äº‹ä»¶ï¼Œå°è‡´å¥¹è½‰å­¸ã€‚å­¸æ ¡æ±ºå®šå¬é–‹æœƒè­°è¨è«–æ­¤äº‹ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "æ—©æ™¨", duration: 300, type: "discussion", description: "è‡ªç”±è¨è«–æ™‚é–“ï¼Œåˆ†äº«ä½ çš„è§€å¯Ÿå’Œæƒ³æ³•" },
                                    { name: "ä¸‹åˆ", duration: 300, type: "discussion", description: "æ·±å…¥è¨è«–äº‹ä»¶å§‹æœ«" },
                                    { name: "å‚æ™š", duration: 100, type: "voting", description: "æŠ•ç¥¨ç’°ç¯€" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "å°é›¨",
                                role: "å—å®³è€…å¥½å‹",
                                background: "ä½ æ˜¯è½‰å­¸å¥³ç”Ÿçš„å¥½å‹ï¼Œç›®ç¹äº†æ•´å€‹éœ¸å‡Œéç¨‹ã€‚",
                                secret: "ä½ æ›¾ç¶“æƒ³é˜»æ­¢ä½†å®³æ€•è‡ªå·±ä¹Ÿæˆç‚ºç›®æ¨™ï¼Œæ‰€ä»¥é¸æ“‡æ²‰é»˜ã€‚",
                                goal: "åæ€ï¼šæ—è§€è€…çš„è²¬ä»»æ˜¯ä»€éº¼ï¼Ÿæ²‰é»˜æ˜¯å¦ç­‰æ–¼ç¸±å®¹ï¼Ÿ",
                                portrait: "teen_3_xiaoyu.jpg"
                            },
                            {
                                name: "é˜¿å‚‘",
                                role: "ç­ä¸ŠåŒå­¸",
                                background: "ä½ æ˜¯ç­ä¸Šçš„æ´»èºåˆ†å­ï¼Œå’Œå¤§å®¶é—œä¿‚éƒ½ä¸éŒ¯ã€‚",
                                secret: "ä½ æ›¾ç¶“ç„¡æ„ä¸­å‚³æ’­äº†é—œæ–¼å—å®³è€…çš„ä¸å¯¦è¬ è¨€ï¼Œä½†ä½ ä¸çŸ¥é“é€™äº›è©±æœƒé€ æˆé€™éº¼å¤§çš„å‚·å®³ã€‚",
                                goal: "åæ€ï¼šç©ç¬‘å’Œå‚·å®³çš„ç•Œç·šåœ¨å“ªï¼Ÿèªè¨€æš´åŠ›çš„å½±éŸ¿æœ‰å¤šæ·±ï¼Ÿ",
                                portrait: "teen_3_ajie.jpg"
                            },
                            {
                                name: "ç‹è€å¸«",
                                role: "ç­å°å¸«",
                                background: "ä½ æ˜¯é€™å€‹ç­ç´šçš„å°å¸«ï¼Œäº‹ç™¼å¾Œæ‰çŸ¥é“éœ¸å‡Œæƒ…æ³ã€‚",
                                secret: "å…¶å¯¦æœ‰å­¸ç”Ÿæ›¾å‘ä½ æš—ç¤ºéç­ä¸Šæ°›åœä¸å¥½ï¼Œä½†ä½ ç•¶æ™‚æ²’æœ‰é‡è¦–ã€‚",
                                goal: "åæ€ï¼šæ•™è‚²è€…å¦‚ä½•åŠæ—©ç™¼ç¾ä¸¦ä»‹å…¥éœ¸å‡Œï¼Ÿåˆ¶åº¦è©²å¦‚ä½•æ”¹å–„ï¼Ÿ",
                                portrait: "teen_3_teacher.jpg"
                            }
                        ],
                        questions: [
                            "ç‚ºä»€éº¼æ—è§€è€…é¸æ“‡æ²‰é»˜ï¼Ÿå¦‚ä½•é¼“å‹µå­¸ç”Ÿç«™å‡ºä¾†ï¼Ÿ",
                            "è¨€èªéœ¸å‡Œç‚ºä½•å¸¸è¢«å¿½è¦–ï¼Ÿå®ƒçš„å‚·å®³æ€§åœ¨å“ªï¼Ÿ",
                            "å­¸æ ¡å’Œè€å¸«æ‡‰è©²æ¡å–ä»€éº¼æªæ–½é é˜²éœ¸å‡Œï¼Ÿ",
                            "æˆ‘å€‘æ¯å€‹äººå¯ä»¥åšäº›ä»€éº¼ä¾†å‰µé€ æ›´å‹å–„çš„ç’°å¢ƒï¼Ÿ"
                        ],
                        villain: "éœ¸å‡Œçš„æ–½æš´è€…ï¼ˆNPCï¼‰- ç­ä¸Šçš„å°åœ˜é«”é ˜è¢–ï¼Œå› å«‰å¦’è€Œæ•£æ’­è¬ è¨€"
                    },
                    {
                        id: "teen_3_consent",
                        title: "é‚£äº›ä¸èƒ½èªªçš„ç§˜å¯†",
                        description: "æ ¡åœ’æƒ…ä¾¶é–“çš„æ„Ÿæƒ…ç³¾ç´›ï¼Œæ¶‰åŠæƒ…æ„Ÿæ“æ§èˆ‡ç•Œç·šè­°é¡Œã€‚",
                        duration: "25åˆ†é˜",
                        days: 1,
                        difficulty: "å…¥é–€",
                        music: "teen_serious",
                        finalImage: "teen_3_consent_final.jpg",
                        background: "é«˜ä¸­æƒ…ä¾¶é˜¿æ˜å’Œå°èŠ³åˆ†æ‰‹å¾Œï¼Œé˜¿æ˜åœ¨ç¤¾ç¾¤åª’é«”ä¸Šæ•£æ’­å°å°èŠ³ä¸åˆ©çš„è¨€è«–ï¼Œç”šè‡³æš—ç¤ºå¥¹ã€Œä¸æª¢é»ã€ã€‚è¼”å°è€å¸«ä»‹å…¥èª¿æŸ¥ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "æ—©æ™¨", duration: 360, type: "discussion", description: "äº†è§£åˆ†æ‰‹ç¶“é" },
                                    { name: "ä¸‹åˆ", duration: 360, type: "discussion", description: "è¨è«–æƒ…æ„Ÿé—œä¿‚çš„ç•Œç·š" },
                                    { name: "å‚æ™š", duration: 180, type: "voting", description: "æŠ•ç¥¨ç’°ç¯€" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "å°èŠ³",
                                role: "ç•¶äº‹äºº",
                                background: "ä½ å’Œé˜¿æ˜äº¤å¾€ä¸€å¹´å¾Œåˆ†æ‰‹ï¼Œä½†ä»–é–‹å§‹åœ¨ç¶²è·¯ä¸ŠæŠ¹é»‘ä½ ã€‚",
                                secret: "é˜¿æ˜æ›¾ç¶“é€¼è¿«ä½ åšä½ ä¸é¡˜æ„çš„äº‹ï¼Œä½ å› ç‚ºå®³æ€•å’Œä¸å¥½æ„æ€è€Œæ²’æœ‰å‘Šè¨´ä»»ä½•äººã€‚",
                                goal: "åæ€ï¼šæ„Ÿæƒ…ä¸­çš„ç•Œç·šåœ¨å“ªï¼Ÿå¦‚ä½•è¾¨è­˜æƒ…æ„Ÿæ“æ§ï¼Ÿ",
                                portrait: "teen_3_xiaofang.jpg"
                            },
                            {
                                name: "é˜¿æ˜",
                                role: "ç•¶äº‹äºº",
                                background: "ä½ æ˜¯å°èŠ³çš„å‰ç”·å‹ï¼Œå› ç‚ºåˆ†æ‰‹å¾ˆä¸ç”˜å¿ƒã€‚",
                                secret: "ä½ èªç‚ºã€Œäº¤å¾€äº†å°±æ‡‰è©²ä»€éº¼éƒ½ç­”æ‡‰ã€ï¼Œä¸ç†è§£ç‚ºä»€éº¼å°èŠ³è¦åˆ†æ‰‹ã€‚ä½ è¦ºå¾—åœ¨ç¶²è·¯ç™¼æ–‡æ²’ä»€éº¼å¤§ä¸äº†ã€‚",
                                goal: "åæ€ï¼šå°Šé‡èˆ‡ä½”æœ‰çš„å·®åˆ¥ï¼Ÿåˆ†æ‰‹å¾Œå¦‚ä½•å¥½å¥½é“åˆ¥ï¼Ÿ",
                                portrait: "teen_3_aming.jpg"
                            },
                            {
                                name: "è¼”å°è€å¸«",
                                role: "å­¸æ ¡è¼”å°è€å¸«",
                                background: "ä½ è² è²¬è™•ç†é€™èµ·æ ¡åœ’ç³¾ç´›ã€‚",
                                secret: "ä½ ç™¼ç¾å¾ˆå¤šé’å°‘å¹´ä¸ç†è§£ã€ŒåŒæ„ã€çš„æ¦‚å¿µï¼Œä¹Ÿä¸çŸ¥é“æƒ…æ„Ÿæ“æ§çš„è­¦è¨Šã€‚",
                                goal: "åæ€ï¼šå¦‚ä½•æ•™è‚²é’å°‘å¹´å»ºç«‹å¥åº·çš„æƒ…æ„Ÿé—œä¿‚ï¼Ÿ",
                                portrait: "teen_3_counselor.jpg"
                            }
                        ],
                        questions: [
                            "äº¤å¾€ä¸­çš„ã€ŒåŒæ„ã€æ˜¯ä»€éº¼æ„æ€ï¼Ÿå¯ä»¥éš¨æ™‚æ”¹è®Šå¿ƒæ„å—ï¼Ÿ",
                            "ä»€éº¼æ˜¯æƒ…æ„Ÿæ“æ§ï¼Ÿå¦‚ä½•è¾¨è­˜ï¼Ÿ",
                            "åˆ†æ‰‹å¾Œæ•£æ’­ä¸å¯¦è¨€è«–ç®—æ˜¯éœ¸å‡Œå—ï¼Ÿ",
                            "å¦‚ä½•å»ºç«‹å¥åº·ã€å¹³ç­‰çš„æƒ…æ„Ÿé—œä¿‚ï¼Ÿ"
                        ],
                        villain: "é˜¿æ˜çš„è¡Œç‚ºï¼ˆæƒ…æ„Ÿæ“æ§èˆ‡ç¶²è·¯éœ¸å‡Œï¼‰ï¼Œä»¥åŠç¤¾æœƒå°é’å°‘å¹´æ„Ÿæƒ…æ•™è‚²çš„ç¼ºä¹"
                    }
                ],
                4: [
                    {
                        id: "teen_4_photo",
                        title: "ç¤¾åœ˜çš„ç§˜å¯†",
                        description: "å­¸æ ¡æ”å½±ç¤¾ç™¼ç”Ÿå·æ‹äº‹ä»¶ï¼Œå¥³å­¸ç”Ÿç…§ç‰‡è¢«æœªç¶“åŒæ„æ‹æ”å‚³æ’­ã€‚æ¢è¨è‚–åƒæ¬Šèˆ‡æ—è§€è€…è²¬ä»»ã€‚",
                        duration: "25åˆ†é˜",
                        days: 1,
                        difficulty: "å…¥é–€",
                        music: "teen_serious",
                        finalImage: "teen_4_photo_final.jpg",
                        background: "å­¸æ ¡æ”å½±ç¤¾ç™¼ç”Ÿäº†å·æ‹äº‹ä»¶ï¼Œæœ‰å¥³å­¸ç”Ÿçš„ç…§ç‰‡è¢«æœªç¶“åŒæ„åœ°æ‹æ”å’Œå‚³æ’­ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "æ—©æ™¨", duration: 360, type: "discussion", description: "äº†è§£äº‹ä»¶ç¶“é" },
                                    { name: "ä¸‹åˆ", duration: 360, type: "discussion", description: "æ·±å…¥è¨è«–è²¬ä»»æ­¸å±¬" },
                                    { name: "å‚æ™š", duration: 180, type: "voting", description: "æŠ•ç¥¨ç’°ç¯€" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "å°ç¾",
                                role: "å—å®³è€…",
                                background: "ä½ ç™¼ç¾è‡ªå·±çš„ç…§ç‰‡è¢«äººå·æ‹ä¸¦åœ¨ç¶²è·¯ä¸Šæµå‚³ã€‚",
                                secret: "ä½ æ„Ÿåˆ°éå¸¸å®³æ€•å’Œç¾æ„§ï¼Œä¸æ•¢å‘Šè¨´å®¶äººï¼Œä¹Ÿæ“”å¿ƒå¤§å®¶æœƒæ€ªä½ ã€‚",
                                goal: "åæ€ï¼šå—å®³è€…ç‚ºä½•å¸¸é¸æ“‡éš±å¿ï¼Ÿç¤¾æœƒå°å—å®³è€…çš„äºŒæ¬¡å‚·å®³å¦‚ä½•é¿å…ï¼Ÿ",
                                portrait: "teen_4_xiaomei.jpg"
                            },
                            {
                                name: "å¤§æ˜",
                                role: "ç¤¾åœ˜å¹¹éƒ¨",
                                background: "ä½ æ˜¯æ”å½±ç¤¾çš„å¹¹éƒ¨ï¼Œè² è²¬ç®¡ç†ç¤¾åœ˜æ´»å‹•ã€‚",
                                secret: "ä½ çŸ¥é“æ˜¯èª°åšçš„ï¼Œä½†é‚£å€‹äººæ˜¯ä½ çš„å¥½å‹ï¼Œä½ ä¸çŸ¥é“è©²ä¸è©²èªªå‡ºä¾†ã€‚",
                                goal: "åæ€ï¼šå‹æƒ…å’Œæ­£ç¾©å¦‚ä½•å–æ¨ï¼ŸåŒ…åº‡æ˜¯å¦ä¹Ÿæ˜¯ä¸€ç¨®å‚·å®³ï¼Ÿ",
                                portrait: "teen_4_daming.jpg"
                            },
                            {
                                name: "å°è¯",
                                role: "ç¤¾åœ˜æˆå“¡",
                                background: "ä½ æ˜¯æ”å½±ç¤¾çš„æ™®é€šæˆå“¡ï¼Œç¶“å¸¸åƒèˆ‡ç¤¾åœ˜æ´»å‹•ã€‚",
                                secret: "ä½ æ›¾ç¶“çœ‹éå·æ‹è€…çš„ç›¸æ©Ÿè£¡æœ‰å¯ç–‘ç…§ç‰‡ï¼Œä½†ç•¶æ™‚æ²’æƒ³å¤ªå¤šã€‚",
                                goal: "åæ€ï¼šå¦‚ä½•æé«˜å°ä¸ç•¶è¡Œç‚ºçš„è­¦è¦ºæ€§ï¼Ÿç™¼ç¾å•é¡Œæ™‚æ‡‰è©²æ€éº¼åšï¼Ÿ",
                                portrait: "teen_4_xiaohua.jpg"
                            },
                            {
                                name: "è¼”å°è€å¸«",
                                role: "å­¸æ ¡è¼”å°è€å¸«",
                                background: "ä½ æ˜¯è² è²¬è™•ç†æ­¤äº‹çš„è¼”å°è€å¸«ã€‚",
                                secret: "ä½ ç™¼ç¾é€™é¡äº‹ä»¶åœ¨æ ¡åœ’ä¸­å¯èƒ½ä¸åªä¸€èµ·ï¼Œä½†å­¸æ ¡æ“”å¿ƒåè²è€Œä¸é¡˜æ·±ç©¶ã€‚",
                                goal: "åæ€ï¼šå­¸æ ¡å¦‚ä½•å¹³è¡¡åè²å’Œå­¸ç”Ÿæ¬Šç›Šï¼Ÿå®Œå–„çš„é˜²ç¯„æ©Ÿåˆ¶æ˜¯ä»€éº¼ï¼Ÿ",
                                portrait: "teen_4_teacher.jpg"
                            }
                        ],
                        questions: [
                            "æœªç¶“åŒæ„æ‹æ”ä»–äººç…§ç‰‡ç‚ºä½•æ˜¯éŒ¯çš„ï¼Ÿè‚–åƒæ¬Šæ˜¯ä»€éº¼ï¼Ÿ",
                            "å—å®³è€…ç‚ºä½•å¸¸æ„Ÿåˆ°ç¾æ„§ï¼Ÿæˆ‘å€‘è©²å¦‚ä½•æ”¯æŒä»–å€‘ï¼Ÿ",
                            "æ—è§€è€…ç™¼ç¾å¯ç–‘è¡Œç‚ºæ™‚ï¼Œæ‡‰è©²å¦‚ä½•è™•ç†ï¼Ÿ",
                            "å­¸æ ¡æ‡‰è©²å»ºç«‹ä»€éº¼æ¨£çš„æ©Ÿåˆ¶ä¾†é é˜²å’Œè™•ç†æ­¤é¡äº‹ä»¶ï¼Ÿ"
                        ],
                        villain: "å·æ‹è€…ï¼ˆNPCï¼‰- æŸä½ç¤¾åœ˜æˆå“¡ï¼Œå› ç‚ºæ‰­æ›²çš„å¥½å¥‡å¿ƒè€Œå·æ‹"
                    }
                ],
                5: [
                    {
                        id: "teen_5_uniform",
                        title: "åˆ¶æœçˆ­è­°",
                        description: "å­¸æ ¡å› å¥³å­¸ç”Ÿé•åæœè£è¦å®šçµ¦äºˆè™•åˆ†ï¼Œå¼•ç™¼æ€§åˆ¥é›™é‡æ¨™æº–è¨è«–ã€‚",
                        duration: "30åˆ†é˜",
                        days: 1,
                        difficulty: "é€²éš",
                        background: "å­¸æ ¡å› å¥³å­¸ç”Ÿé•åæœè£è¦å®šï¼ˆè£™å­å¤ªçŸ­ï¼‰è€Œçµ¦äºˆè™•åˆ†ï¼Œå¼•ç™¼å­¸ç”Ÿå°æ–¼æ€§åˆ¥é›™é‡æ¨™æº–çš„è¨è«–ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "æ—©æ™¨", duration: 420, type: "discussion", description: "äº†è§£äº‹ä»¶ä¸¦åˆ†äº«çœ‹æ³•" },
                                    { name: "ä¸‹åˆ", duration: 420, type: "discussion", description: "æ·±å…¥æ¢è¨æ€§åˆ¥å¹³æ¬Šè­°é¡Œ" },
                                    { name: "å‚æ™š", duration: 180, type: "voting", description: "æŠ•ç¥¨ç’°ç¯€" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "å°å©·",
                                role: "è¢«è™•åˆ†å­¸ç”Ÿ",
                                background: "ä½ å› ç‚ºè£™å­é•·åº¦è¢«è¨˜è­¦å‘Šï¼Œæ„Ÿåˆ°ä¸å…¬å¹³ã€‚",
                                secret: "ä½ çš„è£™å­å…¶å¯¦ç¬¦åˆè¦å®šé•·åº¦ï¼Œåªæ˜¯å› ç‚ºèº«ææ¯”è¼ƒé«˜æŒ‘é¡¯å¾—çŸ­ã€‚ä½ è¦ºå¾—é€™æ˜¯é‡å°å¥³ç”Ÿçš„å¤–è²Œæ­§è¦–ã€‚",
                                goal: "åæ€ï¼šæœè£è¦å®šæ˜¯å¦å­˜åœ¨æ€§åˆ¥é›™é‡æ¨™æº–ï¼Ÿèº«é«”è‡ªä¸»æ¬Šçš„ç•Œç·šåœ¨å“ªï¼Ÿ"
                            },
                            {
                                name: "é˜¿å¼·",
                                role: "ç­ä¸Šç”·åŒå­¸",
                                background: "ä½ æ˜¯ç­ä¸Šçš„ç”·åŒå­¸ï¼Œå°é€™å€‹è™•åˆ†æœ‰ä¸åŒçœ‹æ³•ã€‚",
                                secret: "ä½ æ›¾ç¶“é•åæœè£è¦å®šä½†æ²’è¢«è™•ç½°éï¼Œé–‹å§‹æ„è­˜åˆ°ç”·å¥³ç”Ÿç¢ºå¯¦è¢«ç”¨ä¸åŒæ¨™æº–å°å¾…ã€‚",
                                goal: "åæ€ï¼šç”·ç”Ÿå¦‚ä½•ç†è§£ä¸¦æ”¯æŒæ€§åˆ¥å¹³æ¬Šï¼Ÿç‰¹æ¬Šçš„å­˜åœ¨å¦‚ä½•è¢«å¯Ÿè¦ºï¼Ÿ"
                            },
                            {
                                name: "æ—ä¸»ä»»",
                                role: "è¨“å°ä¸»ä»»",
                                background: "ä½ æ˜¯è² è²¬åŸ·è¡Œæ ¡è¦çš„è¨“å°ä¸»ä»»ã€‚",
                                secret: "ä½ èªç‚ºåš´æ ¼çš„æœè£è¦å®šæ˜¯ç‚ºå­¸ç”Ÿå¥½ï¼Œä½†ä¹Ÿæ„è­˜åˆ°æŸäº›è¦å®šå¯èƒ½ç¢ºå¯¦éæ™‚äº†ã€‚",
                                goal: "åæ€ï¼šæ ¡è¦çš„ç›®çš„æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•åœ¨ç®¡ç†å’Œå°Šé‡ä¹‹é–“å–å¾—å¹³è¡¡ï¼Ÿ"
                            },
                            {
                                name: "å®¶é•·ä»£è¡¨",
                                role: "å­¸ç”Ÿå®¶é•·",
                                background: "ä½ æ˜¯å®¶é•·æœƒä»£è¡¨ï¼Œé—œå¿ƒæ ¡åœ’è­°é¡Œã€‚",
                                secret: "ä½ å…§å¿ƒèªç‚ºå¥³ç”Ÿæ‡‰è©²è¦ã€Œä¿è­·è‡ªå·±ã€ï¼Œç©¿è‘—ä¿å®ˆä¸€é»ï¼Œä½†ä½ çš„å¥³å…’è®“ä½ é–‹å§‹åæ€é€™ç¨®æƒ³æ³•ã€‚",
                                goal: "åæ€ï¼š'ä¿è­·è‡ªå·±'æ˜¯å¦åœ¨æš—ç¤ºå—å®³è€…æœ‰è²¬ä»»ï¼Ÿå¦‚ä½•æ•™è‚²ä¸‹ä¸€ä»£ï¼Ÿ"
                            },
                            {
                                name: "å­¸ç”Ÿæœƒé•·",
                                role: "å­¸ç”Ÿæœƒæœƒé•·",
                                background: "ä½ æ˜¯å­¸ç”Ÿæœƒé•·ï¼Œæƒ³è¦æ¨å‹•æ ¡è¦æ”¹é©ã€‚",
                                secret: "ä½ æ­£åœ¨æ”¶é›†å„æ–¹æ„è¦‹ï¼Œæº–å‚™å‘æ ¡æ–¹æå‡ºä¿®æ”¹æœè£è¦å®šçš„å»ºè­°æ›¸ã€‚",
                                goal: "åæ€ï¼šå­¸ç”Ÿå¦‚ä½•æœ‰æ•ˆåœ°åƒèˆ‡æ ¡åœ’æ°‘ä¸»ï¼Ÿæ”¹è®Šå¦‚ä½•ç™¼ç”Ÿï¼Ÿ"
                            }
                        ],
                        questions: [
                            "æœè£è¦å®šæ˜¯å¦å°ä¸åŒæ€§åˆ¥æœ‰ä¸åŒæ¨™æº–ï¼Ÿç‚ºä»€éº¼ï¼Ÿ",
                            "'ä¿è­·è‡ªå·±'çš„èªªæ³•æ˜¯å¦åœ¨å°‡è²¬ä»»æ­¸å’æ–¼å—å®³è€…ï¼Ÿ",
                            "å¦‚ä½•åœ¨å°Šé‡å‚³çµ±å’Œè¿½æ±‚é€²æ­¥ä¹‹é–“å–å¾—å¹³è¡¡ï¼Ÿ",
                            "å¹´è¼•äººå¦‚ä½•åƒèˆ‡åˆ¶åº¦æ”¹é©ï¼Ÿå°è©±å’Œè¡Œå‹•çš„ç­–ç•¥æ˜¯ä»€éº¼ï¼Ÿ"
                        ],
                        villain: "éæ™‚çš„åˆ¶åº¦å’Œåˆ»æ¿å°è±¡ï¼ˆéç‰¹å®šäººç‰©ï¼‰"
                    }
                ],
                6: [
                    {
                        id: "teen_6_game",
                        title: "ç·šä¸ŠéŠæˆ²çš„é™°å½±",
                        description: "å¥³å­¸ç”Ÿåœ¨ç·šä¸ŠéŠæˆ²ä¸­é­å—æ€§åˆ¥æ­§è¦–å’Œæ€§é¨·æ“¾ã€‚æ¢è¨è™›æ“¬ä¸–ç•Œçš„çœŸå¯¦å‚·å®³ã€‚",
                        duration: "35åˆ†é˜",
                        days: 1,
                        difficulty: "é€²éš",
                        background: "æŸä½å¥³å­¸ç”Ÿåœ¨ç·šä¸ŠéŠæˆ²ä¸­é­å—æ€§åˆ¥æ­§è¦–å’Œæ€§é¨·æ“¾ï¼Œå°è‡´å¥¹é€€å‡ºéŠæˆ²ç¤¾ç¾¤ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "æ—©æ™¨", duration: 480, type: "discussion", description: "äº†è§£äº‹ä»¶ç¶“é" },
                                    { name: "ä¸‹åˆ", duration: 480, type: "discussion", description: "è¨è«–ç¶²è·¯æ–‡åŒ–èˆ‡è²¬ä»»" },
                                    { name: "å‚æ™š", duration: 240, type: "voting", description: "æŠ•ç¥¨ç’°ç¯€" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "å°æ«»",
                                role: "å—å®³ç©å®¶",
                                background: "ä½ ç†±æ„›éŠæˆ²ï¼Œä½†åœ¨éŠæˆ²ä¸­é­å—æ€§åˆ¥æ­§è¦–å’Œé¨·æ“¾ã€‚",
                                secret: "ä½ æ›¾ç¶“å˜—è©¦ç”¨ç”·æ€§å¸³è™Ÿç©éŠæˆ²ï¼Œç™¼ç¾å¾…é‡å®Œå…¨ä¸åŒã€‚ä½ å¾ˆé›£ééŠæˆ²ä¸–ç•Œä¹Ÿæœ‰æ€§åˆ¥æ­§è¦–ã€‚",
                                goal: "åæ€ï¼šç‚ºä½•å¥³æ€§åœ¨éŠæˆ²ç¤¾ç¾¤ä¸­å¸¸è¢«å·®åˆ¥å°å¾…ï¼Ÿè™›æ“¬ä¸–ç•Œçš„æ€§é¨·æ“¾ä¸€æ¨£åš´é‡å—ï¼Ÿ"
                            },
                            {
                                name: "é˜¿å¨",
                                role: "éŠæˆ²å…¬æœƒæœƒé•·",
                                background: "ä½ æ˜¯å…¬æœƒçš„æœƒé•·ï¼ŒçŸ¥é“ç™¼ç”Ÿäº†ä¸æ„‰å¿«çš„äº‹ã€‚",
                                secret: "ä½ æ›¾è½åˆ°å…¬æœƒæˆå“¡å°å¥³ç©å®¶é–‹é»ƒè…”ï¼Œä½†ç•¶æ™‚åªæ˜¯ç¬‘ç¬‘å¸¶éï¼Œæ²’æœ‰åˆ¶æ­¢ã€‚",
                                goal: "åæ€ï¼šæ²‰é»˜å’Œèµ·é¬¨æœ‰ä»€éº¼å·®åˆ¥ï¼Ÿç¤¾ç¾¤é ˜è¢–çš„è²¬ä»»æ˜¯ä»€éº¼ï¼Ÿ"
                            },
                            {
                                name: "å°æ°",
                                role: "éŠæˆ²ç©å®¶",
                                background: "ä½ æ˜¯éŠæˆ²ä¸­çš„æ™®é€šç©å®¶ã€‚",
                                secret: "ä½ æ›¾ç¶“è¦ºå¾—æŸäº›ç©ç¬‘å¾ˆå¥½ç¬‘ï¼Œä½†ç¾åœ¨é–‹å§‹æ€è€ƒé€™äº›ç©ç¬‘å¯èƒ½å‚·å®³äº†èª°ã€‚",
                                goal: "åæ€ï¼šä»€éº¼æ¨£çš„ç©ç¬‘æœƒæ§‹æˆé¨·æ“¾ï¼Ÿç•Œç·šåœ¨å“ªè£¡ï¼Ÿ"
                            },
                            {
                                name: "éŠæˆ²ç‰ˆä¸»",
                                role: "è«–å£‡ç‰ˆä¸»",
                                background: "ä½ æ˜¯éŠæˆ²è«–å£‡çš„ç‰ˆä¸»ï¼Œè² è²¬ç¶­æŒç§©åºã€‚",
                                secret: "ä½ æ”¶åˆ°éå¾ˆå¤šæª¢èˆ‰ï¼Œä½†å› ç‚ºäººæ‰‹ä¸è¶³å’Œä¸æƒ³æƒ¹éº»ç…©ï¼Œå¾ˆå¤šéƒ½è‰è‰çµæ¡ˆã€‚",
                                goal: "åæ€ï¼šå¹³å°æ–¹çš„è²¬ä»»æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•æœ‰æ•ˆç®¡ç†ç¤¾ç¾¤ï¼Ÿ"
                            },
                            {
                                name: "è€ç©å®¶",
                                role: "è³‡æ·±ç©å®¶",
                                background: "ä½ ç©é€™å€‹éŠæˆ²å¾ˆå¤šå¹´äº†ï¼Œè¦‹è­‰äº†ç¤¾ç¾¤æ–‡åŒ–çš„è®ŠåŒ–ã€‚",
                                secret: "ä½ ä»¥å‰ä¹Ÿè¦ºå¾—éŠæˆ²ä¸–ç•Œå°±æ˜¯å¯ä»¥äº‚è¬›è©±çš„åœ°æ–¹ï¼Œä½†éš¨è‘—å¹´ç´€å¢é•·é–‹å§‹åæ€é€™ç¨®æ–‡åŒ–ã€‚",
                                goal: "åæ€ï¼šéŠæˆ²ç¤¾ç¾¤æ–‡åŒ–å¦‚ä½•å½¢æˆï¼Ÿè€ç©å®¶å¦‚ä½•å¸¶é ˜æ­£å‘æ”¹è®Šï¼Ÿ"
                            },
                            {
                                name: "å­¸æ ¡è¼”å°è€å¸«",
                                role: "è¼”å°è€å¸«",
                                background: "ä½ æ˜¯å°æ«»çš„è¼”å°è€å¸«ï¼Œå¥¹å‘ä½ æ±‚åŠ©ã€‚",
                                secret: "ä½ ç™¼ç¾ç¶²è·¯éœ¸å‡Œå’Œæ€§é¨·æ“¾å•é¡Œè¶Šä¾†è¶Šåš´é‡ï¼Œä½†ä¸çŸ¥é“è©²å¦‚ä½•å¹«åŠ©å­¸ç”Ÿã€‚",
                                goal: "åæ€ï¼šç¶²è·¯ä¸–ç•Œçš„å‚·å®³åŒæ¨£çœŸå¯¦å—ï¼Ÿå¦‚ä½•æ•™è‚²å­¸ç”Ÿä¿è­·è‡ªå·±å’Œå°Šé‡ä»–äººï¼Ÿ"
                            }
                        ],
                        questions: [
                            "ç‚ºä»€éº¼ç¶²è·¯ä¸Šçš„æ€§åˆ¥æ­§è¦–å’Œç¾å¯¦ä¸€æ¨£åš´é‡ï¼Ÿ",
                            "è™›æ“¬ä¸–ç•Œçš„è¨€è¡Œæ˜¯å¦éœ€è¦è² è²¬ï¼Ÿç•Œç·šåœ¨å“ªï¼Ÿ",
                            "å¦‚ä½•å»ºç«‹æ›´å‹å–„çš„éŠæˆ²ç¤¾ç¾¤æ–‡åŒ–ï¼Ÿ",
                            "å¹³å°ã€ç©å®¶ã€ç¤¾æœƒå„è‡ªæ‡‰è©²æ‰¿æ“”ä»€éº¼è²¬ä»»ï¼Ÿ"
                        ],
                        villain: "é¨·æ“¾è€…ï¼ˆNPCï¼‰- å¤šä½ä¸ç‰¹å®šçš„ç©å®¶ï¼Œä»£è¡¨æœ‰å•é¡Œçš„ç¤¾ç¾¤æ–‡åŒ–"
                    }
                ]
            },
            adult: {
                3: [
                    {
                        id: "adult_3_workplace",
                        title: "è·å ´çš„ç»ç’ƒå¤©èŠ±æ¿",
                        description: "ç§‘æŠ€å…¬å¸æ€§é¨·æ“¾äº‹ä»¶è¢«æ©è“‹ï¼Œå¥³ä¸»ç®¡æœ€çµ‚é›¢è·ã€‚çŸ­ç¯‡æ¨ç†åŠ‡æœ¬ã€‚",
                        duration: "30åˆ†é˜",
                        days: 1,
                        difficulty: "å…¥é–€",
                        background: "æŸç§‘æŠ€å…¬å¸ç™¼ç”Ÿæ€§é¨·æ“¾äº‹ä»¶ï¼Œä¸€ä½å¥³æ€§ä¸»ç®¡æŒ‡æ§ç”·æ€§åŒäº‹é¨·æ“¾ï¼Œä½†å…¬å¸ä¼¼ä¹åœ¨æ©è“‹çœŸç›¸ã€‚æœ€çµ‚è©²å¥³ä¸»ç®¡é›¢è·ï¼Œæ­¤äº‹å¼•ç™¼è¨è«–ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "æ—©æ™¨", duration: 420, type: "discussion", description: "äº†è§£äº‹ä»¶ç¶“éï¼Œå°‹æ‰¾ç·šç´¢" },
                                    { name: "ä¸‹åˆ", duration: 420, type: "discussion", description: "æ·±å…¥æ¨ç†ï¼Œè³ªè©¢å„æ–¹" },
                                    { name: "å‚æ™š", duration: 240, type: "voting", description: "æŠ•ç¥¨æ‰¾å‡ºåŠ å®³è€…èˆ‡å¹«å…‡" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "æ—é›…å©·",
                                role: "å—å®³è€…",
                                background: "ä½ æ˜¯å…¬å¸çš„è³‡æ·±ä¸»ç®¡ï¼Œé­å—æ€§é¨·æ“¾å¾Œå‘å…¬å¸æª¢èˆ‰ã€‚",
                                secret: "å…¬å¸é«˜å±¤ç§ä¸‹è¦ä½ æ’¤å›æª¢èˆ‰ï¼Œæ‰¿è«¾å‡è·ï¼Œä½†ä½ æ‹’çµ•äº†ã€‚ä½ çŸ¥é“é‚„æœ‰å…¶ä»–å—å®³è€…ä¸æ•¢ç«™å‡ºä¾†ã€‚",
                                goal: "æ‰¾å‡ºèª°åœ¨é˜»æ’“èª¿æŸ¥ï¼Œæ­éœ²å…¬å¸çš„åŒ…åº‡è¡Œç‚ºã€‚"
                            },
                            {
                                name: "ç‹å¤§ç‚º",
                                role: "è¢«æŒ‡æ§è€…",
                                background: "ä½ æ˜¯æ¥­å‹™éƒ¨é–€çš„ä¸»ç®¡ï¼Œè¢«æŒ‡æ§æ€§é¨·æ“¾ã€‚",
                                secret: "**ä½ æ˜¯é¨·æ“¾è€…**ã€‚ä½ è¦ºå¾—è‡ªå·±åªæ˜¯é–‹ç©ç¬‘è¡¨é”å‹å¥½ï¼Œä¸æ‰¿èªé€™æ˜¯é¨·æ“¾ã€‚ä½ å‹•ç”¨é—œä¿‚è®“å…¬å¸å£“ä¸‹æ­¤äº‹ã€‚",
                                goal: "ä¿è­·è‡ªå·±çš„è·ä½å’Œè²è­½ï¼Œè®“æ­¤äº‹ä¸äº†äº†ä¹‹ã€‚"
                            },
                            {
                                name: "äººè³‡ç¸½ç›£",
                                role: "äººåŠ›è³‡æºç¸½ç›£",
                                background: "ä½ è² è²¬è™•ç†å…¬å¸çš„äººäº‹ç³¾ç´›ã€‚",
                                secret: "**ä½ æ˜¯å¹«å…‡**ã€‚ä½ æ”¶åˆ°é«˜å±¤å£“åŠ›ï¼Œæ²’æœ‰å…¬æ­£è™•ç†æ­¤æ¡ˆã€‚ä½ å®³æ€•å¤±å»å·¥ä½œï¼Œé¸æ“‡é…åˆé«˜å±¤ã€‚",
                                goal: "å¹³æ¯äº‹ä»¶ï¼Œä½†å…§å¿ƒæ™æ‰æ–¼æ­£ç¾©å’Œç”Ÿè¨ˆä¹‹é–“ã€‚"
                            }
                        ],
                        questions: [
                            "ç‚ºä»€éº¼è·å ´æ€§é¨·æ“¾é›£ä»¥è¢«æ­£è¦–å’Œè™•ç†ï¼Ÿ",
                            "æ¬ŠåŠ›çµæ§‹å¦‚ä½•å½±éŸ¿æ€§é¨·æ“¾äº‹ä»¶çš„è™•ç†ï¼Ÿ",
                            "å—å®³è€…ç«™å‡ºä¾†éœ€è¦ä»˜å‡ºä»€éº¼ä»£åƒ¹ï¼Ÿ",
                            "æ—è§€è€…å’Œåˆ¶åº¦åœ¨æ€§é¨·æ“¾ä¸­æ‰®æ¼”ä»€éº¼è§’è‰²ï¼Ÿ"
                        ]
                    }
                ],
                4: [
                    {
                        id: "adult_4_domestic",
                        title: "å©šå§»çš„å›šç± ",
                        description: "å®¶æš´å—å®³è€…å¤šæ¬¡å ±è­¦åˆæ’¤æ¡ˆï¼Œé„°å±…å’Œç¤¾å·¥ä»‹å…¥èª¿æŸ¥ã€‚æ¢è¨å®¶æš´å¾ªç’°ã€‚",
                        duration: "35åˆ†é˜",
                        days: 1,
                        difficulty: "é€²éš",
                        background: "ä¸€ä½å¥³æ€§åœ¨å®¶æš´å¾Œå ±è­¦ï¼Œä½†æœ€çµ‚åˆæ’¤éŠ·äº†å ±æ¡ˆã€‚é„°å±…å’Œç¤¾å·¥ä»‹å…¥èª¿æŸ¥ï¼Œç™¼ç¾äº‹æƒ…ä¸¦ä¸å–®ç´”ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "æ—©æ™¨", duration: 480, type: "discussion", description: "äº†è§£æ¡ˆä»¶èƒŒæ™¯" },
                                    { name: "ä¸‹åˆ", duration: 540, type: "discussion", description: "æ·±å…¥è¨è«–å®¶æš´å¾ªç’°èˆ‡è²¬ä»»" },
                                    { name: "å‚æ™š", duration: 240, type: "voting", description: "æŠ•ç¥¨ç’°ç¯€" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "å¼µå°æƒ ",
                                role: "å—å®³è€…",
                                background: "ä½ æ˜¯å®¶æš´å—å®³è€…ï¼Œå¤šæ¬¡å ±è­¦å¾Œåˆæ’¤æ¡ˆã€‚",
                                secret: "ä½ åœ¨ç¶“æ¿Ÿä¸Šå®Œå…¨ä¾è³´ä¸ˆå¤«ï¼Œå®³æ€•é›¢å©šå¾Œç„¡æ³•é¤Šæ´»å­©å­ã€‚ä¸ˆå¤«æ¯æ¬¡é“æ­‰å¾Œä½ éƒ½é¸æ“‡åŸè«’ï¼Œä½†æš´åŠ›è¶Šä¾†è¶Šåš´é‡ã€‚",
                                goal: "åœ¨è¨è«–ä¸­æ‰¾åˆ°å‹‡æ°£å’Œè³‡æºï¼Œæ€è€ƒå¦‚ä½•è„«é›¢æš´åŠ›é—œä¿‚ã€‚"
                            },
                            {
                                name: "å¼µå»ºåœ‹",
                                role: "æ–½æš´è€…",
                                background: "ä½ æ˜¯å¼µå°æƒ çš„ä¸ˆå¤«ï¼Œè¢«æŒ‡æ§å®¶æš´ã€‚",
                                secret: "**ä½ æ˜¯æ–½æš´è€…**ã€‚ä½ èªç‚ºæ‰“è€å©†æ˜¯ç®¡æ•™ï¼Œæ¯æ¬¡äº‹å¾Œéƒ½æœƒé“æ­‰é€ç¦®ï¼Œèªç‚ºè‡ªå·±å·²ç¶“æ”¹éã€‚ä½ å¨è„…å¦»å­ä¸å‡†é›¢å©šï¼Œå¦å‰‡å°±çˆ­å¥ªå­©å­ç›£è­·æ¬Šã€‚",
                                goal: "ç¶­æŒå©šå§»ï¼Œèªç‚ºé€™æ˜¯å®¶å‹™äº‹ï¼Œä¸è©²è¢«å¤–äººå¹²æ¶‰ã€‚"
                            },
                            {
                                name: "ç‹ç¤¾å·¥",
                                role: "ç¤¾å·¥",
                                background: "ä½ æ˜¯è² è²¬æ­¤æ¡ˆçš„ç¤¾å·¥ï¼Œå¤šæ¬¡è¨ªè¦–ã€‚",
                                secret: "ä½ ç›®ç¹äº†å¤ªå¤šé¡ä¼¼æ¡ˆä¾‹ï¼ŒçŸ¥é“å—å®³è€…å¹³å‡è¦é›¢é–‹7æ¬¡æ‰èƒ½çœŸæ­£è„«é›¢ã€‚ä½ æƒ³å¹«å¿™ä½†åˆ¶åº¦æœ‰é™åˆ¶ã€‚",
                                goal: "å”åŠ©å—å®³è€…èªè­˜è³‡æºï¼Œç†è§£é›¢é–‹æš´åŠ›é—œä¿‚çš„å›°é›£ã€‚"
                            },
                            {
                                name: "æé„°å±…",
                                role: "é„°å±…",
                                background: "ä½ æ˜¯éš”å£é„°å±…ï¼Œå¸¸è½åˆ°çˆ­åµè²ã€‚",
                                secret: "ä½ å¤šæ¬¡è½åˆ°å®¶æš´è²éŸ³ä½†é¸æ“‡ä¸å ±è­¦ï¼Œèªç‚ºæ˜¯ã€Œäººå®¶çš„å®¶å‹™äº‹ã€ã€‚ç›´åˆ°é€™æ¬¡çœ‹åˆ°å¼µå°æƒ è¢«æ‰“åˆ°ä½é™¢æ‰å ±è­¦ã€‚",
                                goal: "åæ€è‡ªå·±çš„å†·æ¼ ï¼Œç†è§£æ—è§€è€…çš„è²¬ä»»ã€‚"
                            }
                        ],
                        questions: [
                            "ç‚ºä»€éº¼å®¶æš´å—å®³è€…å¾ˆé›£é›¢é–‹æš´åŠ›é—œä¿‚ï¼Ÿ",
                            "ç¶“æ¿Ÿæ§åˆ¶å¦‚ä½•æˆç‚ºå®¶æš´çš„æ‰‹æ®µï¼Ÿ",
                            "ç¤¾æœƒå°æ–¼å®¶æš´æœ‰å“ªäº›è¿·æ€ï¼Ÿï¼ˆå¦‚ï¼šå®¶å‹™äº‹ã€åºŠé ­åµåºŠå°¾å’Œï¼‰",
                            "é„°å±…å’Œç¤¾æœƒå¯ä»¥å¦‚ä½•å¹«åŠ©å—å®³è€…ï¼Ÿ"
                        ]
                    }
                ],
                5: [
                    {
                        id: "adult_5_party_short",
                        title: "æ´¾å°ä¹‹å¾Œï¼ˆçŸ­ç¯‡ï¼‰",
                        description: "å¤§å­¸æ´¾å°å¾Œç™¼ç”Ÿæ€§ä¾µæ¡ˆï¼Œå«Œç–‘äººç¨±ã€Œåˆæ„ã€ã€‚å¿«ç¯€å¥æ¨ç†åŠ‡æœ¬ã€‚",
                        duration: "40åˆ†é˜",
                        days: 1,
                        difficulty: "é€²éš",
                        background: "å¤§å­¸æ ¡åœ’ç™¼ç”Ÿæ€§ä¾µæ¡ˆï¼Œå—å®³è€…åœ¨æ´¾å°å¾Œè¢«ä¾µçŠ¯ï¼Œå«Œç–‘äººç¨±æ˜¯ã€Œåˆæ„æ€§è¡Œç‚ºã€ã€‚æ­¤æ¡ˆå¼•ç™¼æ ¡åœ’è¨è«–ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "ä¸Šåˆ", duration: 600, type: "discussion", description: "é‚„åŸæ´¾å°ç•¶æ™šæƒ…æ³" },
                                    { name: "ä¸‹åˆ", duration: 600, type: "discussion", description: "è³ªè©¢èˆ‡æ¨ç†" },
                                    { name: "å‚æ™š", duration: 300, type: "voting", description: "æŠ•ç¥¨å®šç½ª" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "å°ç¾",
                                role: "å—å®³è€…",
                                background: "ä½ åœ¨æ´¾å°å¾Œé­åˆ°æ€§ä¾µï¼Œæ±ºå®šå ±æ¡ˆã€‚",
                                secret: "ä½ ç•¶æ™‚å–é†‰äº†ï¼Œè¨˜æ†¶æ¨¡ç³Šï¼Œä½†ç¢ºå®šè‡ªå·±èªªéã€Œä¸è¦ã€ã€‚ä½ æ“”å¿ƒè¢«è³ªç–‘ã€Œç‚ºä»€éº¼è¦å–é†‰ã€ã€ã€Œç©¿è‘—æ˜¯ä¸æ˜¯å¤ªæš´éœ²ã€ã€‚",
                                goal: "ç²å¾—æ”¯æŒï¼Œæ­éœ²æ€§ä¾µçŠ¯çš„è¡Œç‚ºå’Œã€Œåˆæ„ã€çš„è¿·æ€ã€‚"
                            },
                            {
                                name: "é˜¿å‚‘",
                                role: "è¢«æ§æ€§ä¾µè€…",
                                background: "ä½ è¢«æŒ‡æ§åœ¨æ´¾å°å¾Œæ€§ä¾µå°ç¾ã€‚",
                                secret: "**ä½ æ˜¯æ€§ä¾µçŠ¯**ã€‚ä½ èªç‚ºå°æ–¹æ²’æœ‰ã€Œæ˜ç¢ºæ‹’çµ•ã€ï¼Œè€Œä¸”ç•¶æ™‚éƒ½åœ¨å–é…’ï¼Œæ‰€ä»¥æ˜¯ã€Œåˆæ„ã€çš„ã€‚ä½ ä¸èªç‚ºé€™æ˜¯æ€§ä¾µã€‚",
                                goal: "è¾¯è§£è‡ªå·±ç„¡ç½ªï¼Œå¼·èª¿ã€Œæ²’æœ‰æ˜ç¢ºèªªä¸å°±æ˜¯åŒæ„ã€ã€‚"
                            },
                            {
                                name: "å°è¯",
                                role: "æ´¾å°åœ¨å ´è€…",
                                background: "ä½ æ˜¯æ´¾å°çš„åƒåŠ è€…ï¼Œç›®ç¹äº†ä¸€äº›æƒ…æ³ã€‚",
                                secret: "ä½ çœ‹åˆ°é˜¿å‚‘æ‰¶è‘—é†‰å€’çš„å°ç¾é›¢é–‹ï¼Œç•¶æ™‚è¦ºå¾—ä¸å¤ªå°å‹ï¼Œä½†æ²’æœ‰é˜»æ­¢ã€‚ç¾åœ¨ä½ å¾ˆè‡ªè²¬ã€‚",
                                goal: "åæ€æ—è§€è€…çš„è²¬ä»»ï¼Œç†è§£ç©æ¥µåŒæ„çš„é‡è¦æ€§ã€‚"
                            },
                            {
                                name: "æ ¡åœ’è«®å•†å¸«",
                                role: "å¿ƒç†è«®å•†å¸«",
                                background: "ä½ æ˜¯å°ç¾æ±‚åŠ©çš„è«®å•†å¸«ã€‚",
                                secret: "ä½ ç™¼ç¾æ ¡åœ’æ€§ä¾µæ¡ˆä»¶é€šå ±ç‡å¾ˆä½ï¼Œå¾ˆå¤šå—å®³è€…å› ç‚ºæ“”å¿ƒäºŒæ¬¡å‚·å®³è€Œé¸æ“‡æ²‰é»˜ã€‚",
                                goal: "æ”¯æŒå—å®³è€…ï¼Œæ•™è‚²å¤§çœ¾é—œæ–¼ã€Œç©æ¥µåŒæ„ã€çš„æ¦‚å¿µã€‚"
                            },
                            {
                                name: "å­¸ç”Ÿæœƒé•·",
                                role: "å­¸ç”Ÿä»£è¡¨",
                                background: "ä½ æ˜¯å­¸ç”Ÿæœƒæœƒé•·ï¼Œé—œæ³¨æ­¤æ¡ˆã€‚",
                                secret: "ä½ ç™¼ç¾å­¸æ ¡ç‚ºäº†åè²ï¼Œå‚¾å‘ç§ä¸‹å’Œè§£è€Œéå…¬æ­£è™•ç†ã€‚ä½ æƒ³æ¨å‹•æ ¡åœ’æ€§å¹³æ•™è‚²æ”¹é©ã€‚",
                                goal: "æ¨å‹•åˆ¶åº¦æ”¹é©ï¼ŒæŒ‘æˆ°ã€Œè¢«å®³è€…æœ‰ç½ªè«–ã€çš„è¿·æ€ã€‚"
                            }
                        ],
                        questions: [
                            "ä»€éº¼æ˜¯ã€Œç©æ¥µåŒæ„ã€ï¼Ÿç‚ºä»€éº¼ã€Œæ²’èªªä¸ã€ä¸ç­‰æ–¼åŒæ„ï¼Ÿ",
                            "é…’ç²¾åœ¨æ€§ä¾µæ¡ˆä»¶ä¸­æ‰®æ¼”ä»€éº¼è§’è‰²ï¼Ÿè²¬ä»»æ­¸å±¬å¦‚ä½•åˆ¤æ–·ï¼Ÿ",
                            "ç‚ºä»€éº¼å—å®³è€…å¸¸è¢«è³ªç–‘ï¼ˆç©¿è‘—ã€è¡Œç‚ºã€å–é…’ï¼‰ï¼Ÿ",
                            "å¦‚ä½•å»ºç«‹å°Šé‡åŒæ„ã€é é˜²æ€§ä¾µçš„æ ¡åœ’æ–‡åŒ–ï¼Ÿ"
                        ]
                    },
                    {
                        id: "adult_5_party_long",
                        title: "æ´¾å°ä¹‹å¾Œï¼ˆé€²éšç‰ˆï¼‰",
                        description: "å¤šå¤©æ·±åº¦èª¿æŸ¥ï¼Œæ­éœ²æ ¡åœ’æ€§ä¾µæ¡ˆèƒŒå¾Œçš„æ¬ŠåŠ›çµæ§‹èˆ‡æ–‡åŒ–ã€‚éœ€è¦æ›´å¤šæ™‚é–“æ¨ç†ã€‚",
                        duration: "60åˆ†é˜",
                        days: 2,
                        difficulty: "å›°é›£",
                        background: "å¤§å­¸æ´¾å°å¾Œç™¼ç”Ÿæ€§ä¾µæ¡ˆã€‚éš¨è‘—èª¿æŸ¥æ·±å…¥ï¼Œç™¼ç¾é€™ä¸æ˜¯å­¤ç«‹äº‹ä»¶ï¼ŒèƒŒå¾Œæ¶‰åŠå­¸é•·å§æ–‡åŒ–ã€å…„å¼Ÿæœƒæ¬ŠåŠ›çµæ§‹ç­‰å•é¡Œã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "æ—©æ™¨", duration: 600, type: "discussion", description: "æ¡ˆä»¶åˆæ­¥èª¿æŸ¥" },
                                    { name: "ä¸‹åˆ", duration: 600, type: "discussion", description: "æ”¶é›†è­‰è©èˆ‡ç·šç´¢" }
                                ],
                                events: [
                                    { phase: "ä¸‹åˆ", content: "å¦ä¸€ä½å­¸ç”ŸåŒ¿åèˆ‰å ±ï¼Œè²ç¨±é¡ä¼¼äº‹ä»¶æ›¾ç™¼ç”Ÿéï¼Œä½†è¢«å£“ä¸‹ä¾†äº†ã€‚" }
                                ]
                            },
                            {
                                day: 2,
                                phases: [
                                    { name: "æ—©æ™¨", duration: 600, type: "discussion", description: "æ·±å…¥èª¿æŸ¥æ ¡åœ’æ–‡åŒ–å•é¡Œ" },
                                    { name: "ä¸‹åˆ", duration: 600, type: "discussion", description: "å°è³ªèˆ‡æ¨ç†" },
                                    { name: "å‚æ™š", duration: 300, type: "voting", description: "æœ€çµ‚æŠ•ç¥¨" }
                                ],
                                events: [
                                    { phase: "æ—©æ™¨", content: "èª¿æŸ¥ç™¼ç¾å…„å¼Ÿæœƒå…§éƒ¨æœ‰ã€Œæˆ°ç¸¾ã€æ–‡åŒ–ï¼Œé¼“å‹µæˆå“¡è¿½æ±‚å¥³ç”Ÿä¸¦åˆ†äº«ç´°ç¯€ã€‚" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "å°ç¾",
                                role: "å—å®³è€…",
                                background: "ä½ åœ¨æ´¾å°å¾Œé­åˆ°æ€§ä¾µï¼Œæ±ºå®šå ±æ¡ˆã€‚",
                                secret: "ç¬¬ä¸€å¤©ï¼šä½ ç•¶æ™‚å–é†‰äº†ï¼Œè¨˜æ†¶æ¨¡ç³Šã€‚ç¬¬äºŒå¤©ï¼šä½ å›æƒ³èµ·æ›´å¤šç´°ç¯€ï¼Œè¨˜å¾—é˜¿å‚‘çš„æœ‹å‹å€‘åœ¨æ—é‚Šèµ·é¬¨ã€‚",
                                goal: "ç²å¾—æ”¯æŒï¼Œæ­éœ²ä¸åªæ˜¯å€‹äººè¡Œç‚ºï¼Œè€Œæ˜¯æœ‰æ¯’çš„æ–‡åŒ–å•é¡Œã€‚"
                            },
                            {
                                name: "é˜¿å‚‘",
                                role: "è¢«æ§æ€§ä¾µè€…",
                                background: "ä½ æ˜¯å…„å¼Ÿæœƒæˆå“¡ï¼Œè¢«æŒ‡æ§æ€§ä¾µã€‚",
                                secret: "**ä½ æ˜¯æ€§ä¾µçŠ¯**ã€‚ç¬¬ä¸€å¤©ï¼šä½ å …ç¨±æ˜¯åˆæ„çš„ã€‚ç¬¬äºŒå¤©ï¼šä½ æ‰¿èªå…„å¼Ÿæœƒæœ‰ã€Œç«¶è³½ã€æ–‡åŒ–ï¼Œä½†ä½ èªç‚ºã€Œå¤§å®¶éƒ½é€™æ¨£ã€ã€‚",
                                goal: "ç‚ºè‡ªå·±è¾¯è­·ï¼Œä¸¦å°‡è²¬ä»»æ¨çµ¦æ–‡åŒ–ç’°å¢ƒã€‚"
                            },
                            {
                                name: "å°è¯",
                                role: "ç›®æ“Šè€…",
                                background: "ä½ æ˜¯æ´¾å°åƒåŠ è€…ï¼Œç›®ç¹äº†ä¸€äº›æƒ…æ³ã€‚",
                                secret: "ç¬¬ä¸€å¤©ï¼šä½ çœ‹åˆ°é˜¿å‚‘æ‰¶å°ç¾é›¢é–‹ã€‚ç¬¬äºŒå¤©ï¼šä½ æƒ³èµ·ç•¶æ™‚é‚„æœ‰å…¶ä»–å…„å¼Ÿæœƒæˆå“¡åœ¨å ´èµ·é¬¨ã€‚",
                                goal: "åæ€æ—è§€è€…èˆ‡é›†é«”è²¬ä»»ã€‚"
                            },
                            {
                                name: "å¤§é›„",
                                role: "å…„å¼Ÿæœƒæœƒé•·",
                                background: "ä½ æ˜¯å…„å¼Ÿæœƒçš„æœƒé•·ã€‚",
                                secret: "**ä½ æ˜¯å…±çŠ¯çµæ§‹çš„ç¶­è­·è€…**ã€‚ç¬¬äºŒå¤©æ­éœ²ï¼šä½ çŸ¥é“æœƒå…§æœ‰ä¸ç•¶æ–‡åŒ–ï¼Œä½†ç‚ºäº†åœ˜é«”è²è­½é¸æ“‡æ©è“‹ã€‚ä½ ä¹Ÿæ›¾é˜»æ­¢å—å®³è€…å ±æ¡ˆã€‚",
                                goal: "ä¿è­·å…„å¼Ÿæœƒè²è­½ï¼Œæ·¡åŒ–äº‹ä»¶åš´é‡æ€§ã€‚"
                            },
                            {
                                name: "æ ¡åœ’è«®å•†å¸«",
                                role: "å¿ƒç†è«®å•†å¸«",
                                background: "ä½ æ˜¯å°ç¾æ±‚åŠ©çš„è«®å•†å¸«ã€‚",
                                secret: "ç¬¬äºŒå¤©ï¼šä½ æ­éœ²éå»å…©å¹´å…§æ¥åˆ°éå¤šèµ·é¡ä¼¼æ¡ˆä»¶ï¼Œä½†éƒ½å› å£“åŠ›è€Œæ²’æœ‰æ­£å¼è™•ç†ã€‚",
                                goal: "æ¨å‹•åˆ¶åº¦æ”¹é©ï¼Œæ‰“ç ´æ²‰é»˜æ–‡åŒ–ã€‚"
                            }
                        ],
                        questions: [
                            "å€‹äººçŠ¯ç½ªèˆ‡é›†é«”æ–‡åŒ–çš„é—œä¿‚æ˜¯ä»€éº¼ï¼Ÿ",
                            "ã€Œå¤§å®¶éƒ½é€™æ¨£ã€èƒ½æˆç‚ºé–‹è„«çš„ç†ç”±å—ï¼Ÿ",
                            "æ¬ŠåŠ›çµæ§‹ï¼ˆå­¸é•·å§åˆ¶ã€å…„å¼Ÿæœƒï¼‰å¦‚ä½•åŠ©é•·æ€§æš´åŠ›ï¼Ÿ",
                            "å¦‚ä½•å¾æ ¹æœ¬æ”¹è®Šæ ¡åœ’æ–‡åŒ–ï¼Ÿ"
                        ]
                    }
                ],
                6: [
                    {
                        id: "adult_6_digital_short",
                        title: "æ•¸ä½æ€§æš´åŠ›ï¼ˆå¿«ç¯€å¥ï¼‰",
                        description: "ç§å¯†ç…§è¢«æ•£æ’­ï¼Œå¿«é€Ÿæ¨ç†æ‰¾å‡ºåŠ å®³è€…èˆ‡å¹«å…‡éˆã€‚",
                        duration: "45åˆ†é˜",
                        days: 1,
                        difficulty: "é€²éš",
                        background: "ä¸€ä½å¥³æ€§çš„ç§å¯†ç…§ç‰‡è¢«å‰ç”·å‹æƒ¡æ„æ•£æ’­åˆ°ç¶²è·¯ä¸Šï¼Œå¼•ç™¼ã€Œçµå·«ã€å’Œç¶²è·¯éœ¸å‡Œã€‚è­¦æ–¹ä»‹å…¥èª¿æŸ¥ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "ä¸Šåˆ", duration: 30, type: "discussion", description: "è¿½æº¯ç…§ç‰‡æ•£æ’­è·¯å¾‘" },
                                    { name: "ä¸‹åˆ", duration: 30, type: "discussion", description: "è¿½ç©¶å„æ–¹è²¬ä»»" },
                                    { name: "å‚æ™š", duration: 30, type: "voting", description: "æŠ•ç¥¨å®šç½ª" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "é™³æ›‰é›¯",
                                role: "å—å®³è€…",
                                background: "ä½ çš„ç§å¯†ç…§ç‰‡è¢«å‰ç”·å‹æ•£æ’­ï¼Œå°è‡´ä½ è¢«ç¶²è·¯éœ¸å‡Œã€‚",
                                secret: "ä½ å› ç‚ºé€™ä»¶äº‹å¤±å»å·¥ä½œã€è¢«å®¶äººè²¬å‚™ï¼Œç”šè‡³æœ‰è‡ªæ®ºå¿µé ­ã€‚ä½ ä¸æ˜ç™½ç‚ºä»€éº¼å¤§å®¶è­´è²¬çš„æ˜¯ä½ è€Œä¸æ˜¯æ•£æ’­è€…ã€‚",
                                goal: "å°‹æ±‚æ­£ç¾©ï¼Œæ­éœ²æ•¸ä½æ€§æš´åŠ›çš„åš´é‡æ€§å’Œå—å®³è€…æ±¡ååŒ–å•é¡Œã€‚"
                            },
                            {
                                name: "å‰ç”·å‹",
                                role: "æ•£æ’­è€…",
                                background: "ä½ æ˜¯é™³æ›‰é›¯çš„å‰ç”·å‹ï¼Œè¢«æŒ‡æ§æ•£æ’­ç§å¯†ç…§ã€‚",
                                secret: "**ä½ æ˜¯åŠ å®³è€…**ã€‚åˆ†æ‰‹å¾Œä½ å› ç‚ºä¸ç”˜å¿ƒï¼Œå°‡ç…§ç‰‡ä¸Šå‚³åˆ°è«–å£‡å ±å¾©ã€‚ä½ èªç‚ºã€Œæ˜¯å¥¹è‡ªå·±æ‹çš„ã€ï¼Œä¸è¦ºå¾—è‡ªå·±æœ‰éŒ¯ã€‚",
                                goal: "æ·¡åŒ–è‡ªå·±çš„è²¬ä»»ï¼Œå°‡ç„¦é»è½‰ç§»åˆ°ã€Œç‚ºä»€éº¼è¦æ‹é€™ç¨®ç…§ç‰‡ã€ã€‚"
                            },
                            {
                                name: "è«–å£‡ç«™ä¸»",
                                role: "è«–å£‡ç®¡ç†è€…",
                                background: "ä½ æ˜¯ç…§ç‰‡æœ€åˆè¢«ä¸Šå‚³çš„è«–å£‡ç®¡ç†å“¡ã€‚",
                                secret: "**ä½ æ˜¯å¹«å…‡**ã€‚ä½ çŸ¥é“æœ‰äººæª¢èˆ‰ï¼Œä½†å› ç‚ºç…§ç‰‡å¸¶ä¾†æµé‡ï¼Œä½ åˆ»æ„æ‹–å»¶åˆªé™¤ã€‚ä½ ä»¥ã€Œè¨€è«–è‡ªç”±ã€ç‚ºè—‰å£ã€‚",
                                goal: "é€ƒé¿è²¬ä»»ï¼Œè¾¯ç¨±å¹³å°åªæ˜¯ä¸­ç«‹çš„å‚³æ’­ç®¡é“ã€‚"
                            },
                            {
                                name: "ç¶²å‹A",
                                role: "ç¶²è·¯é„‰æ°‘",
                                background: "ä½ æ˜¯è«–å£‡çš„æ´»èºç”¨æˆ¶ï¼Œåƒèˆ‡äº†è¨è«–ã€‚",
                                secret: "ä½ è½‰ç™¼äº†ç…§ç‰‡ï¼Œé‚„åœ¨ç•™è¨€å€æ‰¹è©•å—å®³è€…ã€Œä¸æª¢é»ã€ã€‚ç¾åœ¨çœ‹åˆ°æ–°èæ‰æ„è­˜åˆ°è‡ªå·±ä¹Ÿæ˜¯åŠ å®³è€…ä¹‹ä¸€ã€‚",
                                goal: "åæ€ç¶²è·¯éœ¸å‡Œçš„è²¬ä»»ï¼Œç†è§£æ¯å€‹è½‰ç™¼éƒ½æ˜¯äºŒæ¬¡å‚·å®³ã€‚"
                            },
                            {
                                name: "è­¦å¯Ÿ",
                                role: "ç¶²è·¯çŠ¯ç½ªèª¿æŸ¥å“¡",
                                background: "ä½ æ˜¯è² è²¬æ­¤æ¡ˆçš„è­¦å¯Ÿã€‚",
                                secret: "ä½ ç™¼ç¾å¾ˆå¤šäººä¸çŸ¥é“æ•£æ’­ç§å¯†ç…§æ˜¯çŠ¯ç½ªï¼Œè€Œä¸”å—å®³è€…å¸¸è¢«å•ã€Œç‚ºä»€éº¼è¦æ‹ã€ï¼Œå°è‡´å ±æ¡ˆç‡å¾ˆä½ã€‚",
                                goal: "ä¾æ³•è¾¦æ¡ˆï¼ŒåŒæ™‚æ•™è‚²å¤§çœ¾æ•¸ä½æ€§æš´åŠ›çš„æ³•å¾‹è²¬ä»»ã€‚"
                            },
                            {
                                name: "æ€§å¹³å°ˆå®¶",
                                role: "æ€§åˆ¥å¹³æ¬Šå€¡è­°è€…",
                                background: "ä½ æ˜¯é—œæ³¨æ­¤æ¡ˆçš„æ€§å¹³å€¡è­°è€…ã€‚",
                                secret: "ä½ ç™¼ç¾ç¤¾æœƒå°å—å®³è€…çš„æª¢è¨é å¤šæ–¼å°åŠ å®³è€…çš„è­´è²¬ï¼Œé€™ç¨®æ–‡åŒ–å¿…é ˆæ”¹è®Šã€‚",
                                goal: "æ¨å‹•ä¿®æ³•å’Œç¤¾æœƒæ•™è‚²ï¼ŒæŒ‘æˆ°ã€Œè•©å©¦ç¾è¾±ã€æ–‡åŒ–ã€‚"
                            }
                        ],
                        questions: [
                            "ç‚ºä»€éº¼æ•£æ’­ç§å¯†å½±åƒæ˜¯çŠ¯ç½ªï¼ŸåŒæ„æ‹æ”=åŒæ„æ•£æ’­å—ï¼Ÿ",
                            "ç‚ºä»€éº¼å—å®³è€…å¸¸è¢«æª¢è¨è€ŒéåŠ å®³è€…ï¼Ÿ",
                            "ç¶²è·¯è½‰ç™¼è€…ã€å¹³å°ã€è©•è«–è€…å„è‡ªçš„è²¬ä»»æ˜¯ä»€éº¼ï¼Ÿ",
                            "å¦‚ä½•å»ºç«‹å°Šé‡éš±ç§ã€åå°æ•¸ä½æ€§æš´åŠ›çš„ç¶²è·¯æ–‡åŒ–ï¼Ÿ"
                        ]
                    },
                    {
                        id: "adult_6_digital_long",
                        title: "æ•¸ä½æ€§æš´åŠ›ï¼ˆæ·±åº¦ç‰ˆï¼‰",
                        description: "å¤šå¤©èª¿æŸ¥ï¼Œå¾å€‹æ¡ˆå»¶ä¼¸åˆ°ç”¢æ¥­éˆã€æ³•å¾‹æ¼æ´èˆ‡ç¤¾æœƒæ–‡åŒ–ã€‚æœ€è¤‡é›œçš„åŠ‡æœ¬ã€‚",
                        duration: "75åˆ†é˜",
                        days: 3,
                        difficulty: "å°ˆå®¶",
                        background: "ç§å¯†ç…§æ•£æ’­æ¡ˆå»¶ç‡’ï¼Œèª¿æŸ¥ç™¼ç¾èƒŒå¾Œæœ‰çµ„ç¹”åŒ–çš„ã€Œå¾©ä»‡å¼è‰²æƒ…ã€ç”¢æ¥­éˆï¼Œæ¶‰åŠå¤šå€‹å¹³å°ã€ä»˜è²»å…§å®¹ã€ç”šè‡³æœ‰äººå¾ä¸­ç‰Ÿåˆ©ã€‚",
                        dayPhases: [
                            {
                                day: 1,
                                phases: [
                                    { name: "ä¸Šåˆ", duration: 60, type: "discussion", description: "æ¡ˆä»¶åˆæ­¥èª¿æŸ¥" },
                                    { name: "ä¸‹åˆ", duration: 60, type: "discussion", description: "è¿½æº¯ç…§ç‰‡ä¾†æº" }
                                ],
                                events: [
                                    { phase: "ä¸‹åˆ", content: "ç™¼ç¾ç…§ç‰‡ä¸åªåœ¨ä¸€å€‹è«–å£‡ï¼Œå·²ç¶“è¢«è½‰ç™¼åˆ°å¤šå€‹å¹³å°ï¼Œç”šè‡³æœ‰ä»˜è²»è¨‚é–±ç¶²ç«™ã€‚" }
                                ]
                            },
                            {
                                day: 2,
                                phases: [
                                    { name: "ä¸Šåˆ", duration: 60, type: "discussion", description: "èª¿æŸ¥ä»˜è²»ç¶²ç«™èˆ‡ç”¢æ¥­éˆ" },
                                    { name: "ä¸‹åˆ", duration: 60, type: "discussion", description: "è¿½æŸ¥é‡‘æµèˆ‡ç²åˆ©è€…" }
                                ],
                                events: [
                                    { phase: "ä¸Šåˆ", content: "ç™¼ç¾æœ‰äººæ”¶é›†é€™é¡ç…§ç‰‡ï¼Œå»ºç«‹ä»˜è²»ç¶²ç«™ç‡Ÿåˆ©ï¼Œæœˆæ”¶å…¥è¶…éåè¬ã€‚" },
                                    { phase: "ä¸‹åˆ", content: "è­¦æ–¹è¿½æŸ¥åˆ°é‡‘æµï¼Œç™¼ç¾éƒ¨åˆ†å¹³å°è¨­åœ¨åœ‹å¤–ï¼Œè¦é¿å°ç£æ³•å¾‹ã€‚" }
                                ]
                            },
                            {
                                day: 3,
                                phases: [
                                    { name: "ä¸Šåˆ", duration: 60, type: "discussion", description: "æ³•å¾‹æ¼æ´èˆ‡ç¤¾æœƒæ–‡åŒ–è¨è«–" },
                                    { name: "ä¸‹åˆ", duration: 60, type: "discussion", description: "æœ€çµ‚å°è³ªèˆ‡è¾¯è«–" },
                                    { name: "å‚æ™š", duration: 30, type: "voting", description: "ç¶œåˆæŠ•ç¥¨" }
                                ],
                                events: [
                                    { phase: "ä¸Šåˆ", content: "æ€§å¹³åœ˜é«”æŒ‡å‡ºç¾è¡Œæ³•å¾‹å°æ•¸ä½æ€§æš´åŠ›çš„æ‡²ç½°éè¼•ï¼Œä¸”è·¨åœ‹è¿½è¨´å›°é›£ã€‚" }
                                ]
                            }
                        ],
                        characters: [
                            {
                                name: "é™³æ›‰é›¯",
                                role: "å—å®³è€…",
                                background: "ä½ çš„ç§å¯†ç…§è¢«æ•£æ’­ï¼Œèª¿æŸ¥å¾Œç™¼ç¾è¦æ¨¡é è¶…æƒ³åƒã€‚",
                                secret: "ç¬¬ä¸€å¤©ï¼šä½ è¢«éœ¸å‡Œã€‚ç¬¬äºŒå¤©ï¼šç™¼ç¾æœ‰äººç”¨ä½ çš„ç…§ç‰‡ç‰Ÿåˆ©ã€‚ç¬¬ä¸‰å¤©ï¼šä½ äº†è§£åˆ°é€™æ˜¯ç³»çµ±æ€§å•é¡Œï¼Œæ±ºå®šç«™å‡ºä¾†æ¨å‹•ä¿®æ³•ã€‚",
                                goal: "å¾å€‹äººæ­£ç¾©å»¶ä¼¸åˆ°ç¤¾æœƒæ”¹é©ã€‚"
                            },
                            {
                                name: "å‰ç”·å‹",
                                role: "åˆå§‹æ•£æ’­è€…",
                                background: "ä½ ä¸Šå‚³äº†ç…§ç‰‡åˆ°è«–å£‡ã€‚",
                                secret: "**ä½ æ˜¯æºé ­**ã€‚ç¬¬äºŒå¤©ï¼šä½ ç™¼ç¾ç…§ç‰‡è¢«è½‰è³£ç‰Ÿåˆ©ï¼Œé–‹å§‹å®³æ€•ã€‚ç¬¬ä¸‰å¤©ï¼šä½ æ„è­˜åˆ°è‡ªå·±é€ æˆçš„å‚·å®³ç„¡æ³•æŒ½å›ã€‚",
                                goal: "é¢å°è‡ªå·±çš„ç½ªè²¬ï¼Œç†è§£æ•¸ä½è¶³è·¡æ°¸ä¹…å­˜åœ¨ã€‚"
                            },
                            {
                                name: "è«–å£‡ç«™ä¸»",
                                role: "è«–å£‡ç®¡ç†è€…",
                                background: "ä½ ç®¡ç†è«–å£‡ï¼Œç…§ç‰‡æœ€åˆåœ¨æ­¤æµå‚³ã€‚",
                                secret: "**ä½ æ˜¯å¹«å…‡**ã€‚ç¬¬ä¸€å¤©ï¼šä½ æ‹–å»¶åˆªé™¤ã€‚ç¬¬äºŒå¤©æ­éœ²ï¼šä½ å…¶å¯¦æœ‰å¾å»£å‘Šç²åˆ©ã€‚ç¬¬ä¸‰å¤©ï¼šä½ ç™¼ç¾è‡ªå·±å¯èƒ½è§¸çŠ¯åˆ‘æ³•ã€‚",
                                goal: "è©¦åœ–æ¸›è¼•è²¬ä»»ï¼Œä½†é€æ¼¸èªè­˜åˆ°å¹³å°æ–¹çš„ç¾©å‹™ã€‚"
                            },
                            {
                                name: "ä»˜è²»ç¶²ç«™ç¶“ç‡Ÿè€…",
                                role: "è‰²æƒ…ç¶²ç«™ç«™é•·",
                                background: "ä½ ç¶“ç‡Ÿä»˜è²»è¨‚é–±ç¶²ç«™ï¼Œæ”¶é›†é€™é¡å…§å®¹ã€‚",
                                secret: "**ä½ æ˜¯ç”¢æ¥­éˆæ ¸å¿ƒ**ã€‚ç¬¬äºŒå¤©æ­éœ²ï¼šä½ å¾é€™äº›ç…§ç‰‡ç²åˆ©æ•¸åè¬ï¼Œä¸”çŸ¥é“å¾ˆå¤šæ˜¯æœªç¶“åŒæ„çš„ã€‚ä½ èªç‚ºã€Œä¾›éœ€å¸‚å ´ã€åˆç†ã€‚",
                                goal: "è¾¯ç¨±è‡ªå·±åªæ˜¯å•†äººï¼Œè²¬ä»»åœ¨ä¸Šå‚³è€…ã€‚"
                            },
                            {
                                name: "ç¶²å‹/è¨‚é–±è€…",
                                role: "å…§å®¹æ¶ˆè²»è€…",
                                background: "ä½ æ˜¯ç¶²å‹ï¼Œä¹Ÿè¨‚é–±äº†ä»˜è²»å…§å®¹ã€‚",
                                secret: "ç¬¬ä¸€å¤©ï¼šä½ è½‰ç™¼éç…§ç‰‡ã€‚ç¬¬äºŒå¤©ï¼šä½ ä»˜è²»è¨‚é–±äº†é¡ä¼¼ç¶²ç«™ã€‚ç¬¬ä¸‰å¤©ï¼šä½ æ„è­˜åˆ°è‡ªå·±çš„æ¶ˆè²»é¤Šæ´»äº†æ•´å€‹ç”¢æ¥­éˆã€‚",
                                goal: "å¾å¦èªåˆ°è¦ºé†’ï¼Œç†è§£æ¶ˆè²»è€…è²¬ä»»ã€‚"
                            },
                            {
                                name: "è­¦å¯Ÿ",
                                role: "ç¶²è·¯çŠ¯ç½ªèª¿æŸ¥å“¡",
                                background: "ä½ è² è²¬èª¿æŸ¥æ­¤æ¡ˆã€‚",
                                secret: "ç¬¬äºŒå¤©ï¼šä½ ç™¼ç¾è·¨åœ‹è¿½è¨´å›°é›£ï¼Œå¾ˆå¤šä¼ºæœå™¨åœ¨åœ‹å¤–ã€‚ç¬¬ä¸‰å¤©ï¼šä½ æ­éœ²ç¾è¡Œæ³•å¾‹æ¼æ´ï¼Œåˆ‘è²¬éè¼•ä¸”èˆ‰è­‰å›°é›£ã€‚",
                                goal: "ä¾æ³•è¾¦æ¡ˆï¼ŒåŒæ™‚å€¡è­°ä¿®æ³•ã€‚"
                            },
                            {
                                name: "æ€§å¹³å¾‹å¸«",
                                role: "æ€§åˆ¥å¹³æ¬Šå¾‹å¸«",
                                background: "ä½ ä»£è¡¨é™³æ›‰é›¯æå‘Šã€‚",
                                secret: "ç¬¬ä¸‰å¤©ï¼šä½ æŒ‡å‡ºå°ç£çš„ã€Šæ€§ä¾µå®³çŠ¯ç½ªé˜²æ²»æ³•ã€‹å°æ•¸ä½æ€§æš´åŠ›è¦ç¯„ä¸è¶³ï¼Œæ‡‰è©²è¦æœ‰å°ˆæ³•ã€‚",
                                goal: "æ¨å‹•æ³•å¾‹æ”¹é©ï¼Œå»ºç«‹æ›´å®Œå–„çš„ä¿è­·æ©Ÿåˆ¶ã€‚"
                            }
                        ],
                        questions: [
                            "æ•¸ä½æ€§æš´åŠ›ç‚ºä½•ç‰¹åˆ¥é›£ä»¥æ ¹é™¤ï¼Ÿ",
                            "ç”¢æ¥­éˆä¸­æ¯å€‹ç’°ç¯€ï¼ˆä¸Šå‚³ã€å¹³å°ã€æ¶ˆè²»è€…ï¼‰çš„è²¬ä»»ç‚ºä½•ï¼Ÿ",
                            "è·¨åœ‹ç¶²è·¯çŠ¯ç½ªè©²å¦‚ä½•è¿½è¨´ï¼Ÿ",
                            "ç¾è¡Œæ³•å¾‹æœ‰å“ªäº›ä¸è¶³ï¼Ÿå¦‚ä½•ä¿®æ³•ï¼Ÿ",
                            "å¦‚ä½•å¾æ ¹æœ¬æ”¹è®Šã€Œè•©å©¦ç¾è¾±ã€æ–‡åŒ–ï¼Ÿ"
                        ]
                    }
                ]
            }
        };

        window.showCreateRoom = function() {
            const name = document.getElementById('playerName').value.trim();
            if (!name) {
                alert('è«‹å…ˆè¼¸å…¥ä½ çš„åå­—');
                return;
            }
            currentPlayerName = name;
            document.getElementById('homeScreen').classList.remove('active');
            document.getElementById('createRoomScreen').classList.add('active');
        };

        window.showJoinRoom = function() {
            const name = document.getElementById('playerName').value.trim();
            if (!name) {
                alert('è«‹å…ˆè¼¸å…¥ä½ çš„åå­—');
                return;
            }
            currentPlayerName = name;
            document.getElementById('homeScreen').classList.remove('active');
            document.getElementById('joinRoomScreen').classList.add('active');
        };

        window.backToHome = function() {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('homeScreen').classList.add('active');
            selectedRoomSize = null;
            selectedScriptType = null;
            selectedScript = null;
        };

        window.backToScriptType = function() {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('createRoomScreen').classList.add('active');
            selectedRoomSize = null;
        };

        window.backToPlayerCount = function() {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('selectPlayerCountScreen').classList.add('active');
            selectedScript = null;
        };

        window.selectScriptType = function(type) {
            selectedScriptType = type;
            document.querySelectorAll('.script-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.script-card').classList.add('selected');
            
            // å»¶é²ä¸€ä¸‹å†è·³è½‰åˆ°é¸æ“‡äººæ•¸é é¢
            setTimeout(() => {
                document.getElementById('createRoomScreen').classList.remove('active');
                document.getElementById('selectPlayerCountScreen').classList.add('active');
            }, 300);
        };

        window.selectRoomSize = function(size) {
            selectedRoomSize = size;
            document.querySelectorAll('.room-size-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // é¡¯ç¤ºå¯ç”¨çš„åŠ‡æœ¬
            setTimeout(() => {
                showAvailableScripts();
            }, 300);
        };

        function showAvailableScripts() {
            const scripts = SCRIPTS[selectedScriptType][selectedRoomSize];
            const scriptList = document.getElementById('scriptList');
            scriptList.innerHTML = '';
            
            scripts.forEach(script => {
                const scriptDiv = document.createElement('div');
                scriptDiv.className = 'script-option';
                scriptDiv.onclick = () => selectScript(script);
                
                scriptDiv.innerHTML = `
                    <h4>${script.title}</h4>
                    <p>${script.description}</p>
                    <div class="script-meta">
                        <span class="tag duration">â±ï¸ ${script.duration}</span>
                        <span class="tag difficulty">ğŸ“Š ${script.difficulty}</span>
                        <span class="tag">ğŸ‘¥ ${selectedRoomSize}äºº</span>
                        ${script.days > 1 ? `<span class="tag">ğŸ“… ${script.days}å¤©</span>` : ''}
                    </div>
                `;
                
                scriptList.appendChild(scriptDiv);
            });
            
            document.getElementById('selectPlayerCountScreen').classList.remove('active');
            document.getElementById('selectScriptScreen').classList.add('active');
        }

        window.selectScript = function(script) {
            selectedScript = script;
            
            // è¦–è¦ºå›é¥‹
            document.querySelectorAll('.script-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.closest('.script-option').classList.add('selected');
            
            // å»¶é²å¾Œå‰µå»ºæˆ¿é–“
            setTimeout(() => {
                createRoomWithScript();
            }, 300);
        };

        async function createRoomWithScript() {
            currentRoomId = generateRoomCode();
            const roomRef = ref(database, `rooms/${currentRoomId}`);
            
            await set(roomRef, {
                host: currentPlayerName,
                status: 'waiting',
                scriptType: selectedScriptType,
                scriptId: selectedScript.id,
                script: selectedScript,
                maxPlayers: selectedRoomSize,
                createdAt: Date.now()
            });

            currentPlayerId = await addPlayer(currentPlayerName);
            isHost = true;
            
            showLobby();
            listenToRoom();
        }

        window.joinRoom = async function() {
            const roomCode = document.getElementById('roomCode').value.trim().toUpperCase();

            if (!roomCode) {
                alert('è«‹è¼¸å…¥æˆ¿é–“ä»£ç¢¼');
                return;
            }

            currentRoomId = roomCode;
            const roomRef = ref(database, `rooms/${currentRoomId}`);
            const snapshot = await get(roomRef);

            if (!snapshot.exists()) {
                alert('æˆ¿é–“ä¸å­˜åœ¨ï¼Œè«‹ç¢ºèªä»£ç¢¼æ˜¯å¦æ­£ç¢º');
                return;
            }

            const room = snapshot.val();
            const currentPlayerCount = room.players ? Object.keys(room.players).length : 0;

            if (currentPlayerCount >= room.maxPlayers) {
                alert('æˆ¿é–“å·²æ»¿');
                return;
            }

            if (room.status !== 'waiting') {
                alert('éŠæˆ²å·²é–‹å§‹ï¼Œç„¡æ³•åŠ å…¥');
                return;
            }

            currentPlayerId = await addPlayer(currentPlayerName);
            showLobby();
            listenToRoom();
        };

        window.startGame = async function() {
            if (!isHost) return;

            const playersRef = ref(database, `rooms/${currentRoomId}/players`);
            const roomRef = ref(database, `rooms/${currentRoomId}`);
            const roomSnapshot = await get(roomRef);
            const room = roomSnapshot.val();
            
            const snapshot = await get(playersRef);
            const players = snapshot.val();
            const playerIds = Object.keys(players);

            if (playerIds.length !== room.maxPlayers) {
                alert(`éœ€è¦ ${room.maxPlayers} åç©å®¶æ‰èƒ½é–‹å§‹éŠæˆ²ï¼Œç›®å‰åªæœ‰ ${playerIds.length} äºº`);
                return;
            }

            const script = room.script;
            
            // éš¨æ©Ÿåˆ†é…è§’è‰²
            const shuffledCharacters = [...script.characters].sort(() => Math.random() - 0.5);
            
            playerIds.forEach((playerId, index) => {
                update(ref(database, `rooms/${currentRoomId}/players/${playerId}`), {
                    character: shuffledCharacters[index]
                });
            });

            await update(ref(database, `rooms/${currentRoomId}`), {
                status: 'playing',
                startTime: Date.now(),
                currentDay: 1,
                currentPhaseIndex: 0
            });
        };

        window.sendMessage = async function() {
            const message = document.getElementById('messageInput').value.trim();
            const messageType = document.getElementById('messageType').value;

            if (!message) return;

            const messagesRef = ref(database, `rooms/${currentRoomId}/messages`);
            await push(messagesRef, {
                sender: currentPlayerName,
                text: message,
                type: messageType,
                timestamp: Date.now()
            });

            document.getElementById('messageInput').value = '';
        };

        window.vote = async function(votedName) {
            if (hasVoted) {
                alert('ä½ å·²ç¶“æŠ•éç¥¨äº†');
                return;
            }

            await update(ref(database, `rooms/${currentRoomId}/players/${currentPlayerId}`), {
                vote: votedName
            });

            hasVoted = true;
            
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.vote-button').forEach(btn => {
                if (btn.textContent.includes(votedName)) {
                    btn.classList.add('voted');
                    btn.textContent = btn.textContent + ' âœ“';
                }
                btn.disabled = true;
            });

            alert('æŠ•ç¥¨æˆåŠŸï¼ç­‰å¾…å…¶ä»–ç©å®¶...');
            checkVoteResults();
        };

        window.leaveRoom = function() {
            if (currentRoomId && currentPlayerId) {
                remove(ref(database, `rooms/${currentRoomId}/players/${currentPlayerId}`));
            }
            location.reload();
        };

        function generateRoomCode() {
            return Math.random().toString(36).substring(2, 8).toUpperCase();
        }

        async function addPlayer(name) {
            const playersRef = ref(database, `rooms/${currentRoomId}/players`);
            const newPlayerRef = push(playersRef);
            
            await set(newPlayerRef, {
                name: name,
                joinedAt: Date.now()
            });

            onDisconnect(newPlayerRef).remove();
            
            return newPlayerRef.key;
        }

        function showLobby() {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('lobbyScreen').classList.add('active');
            document.getElementById('displayRoomCode').textContent = currentRoomId;

            // æ’­æ”¾ç­‰å€™å®¤éŸ³æ¨‚
            playMusic('lobby');

            if (isHost) {
                document.getElementById('hostControls').style.display = 'block';
            }
        }

        function listenToRoom() {
            const roomRef = ref(database, `rooms/${currentRoomId}`);
            
            onValue(roomRef, (snapshot) => {
                const room = snapshot.val();
                if (!room) {
                    alert('æˆ¿é–“å·²é—œé–‰');
                    location.reload();
                    return;
                }

                updatePlayersList(room.players, room.maxPlayers);

                if (room.script) {
                    document.getElementById('displayScriptName').textContent = room.script.title;
                    document.getElementById('displayDuration').textContent = room.script.duration;
                }

                if (room.status === 'playing') {
                    showGame(room);
                    updateGamePhase(room);
                }

                if (room.messages) {
                    updateChat(room.messages);
                }
            });
        }

        function updatePlayersList(players, maxPlayers) {
            const list = document.getElementById('playersList');
            const currentCount = players ? Object.keys(players).length : 0;
            
            document.getElementById('currentPlayers').textContent = currentCount;
            document.getElementById('maxPlayers').textContent = maxPlayers;
            
            list.innerHTML = '';

            if (!players) return;

            Object.entries(players).forEach(([id, player]) => {
                const div = document.createElement('div');
                div.className = 'player-item';
                div.innerHTML = `
                    <span>ğŸ‘¤ ${player.name}</span>
                    ${player.character ? '<span style="color: #28a745;">âœ… å·²å°±ç·’</span>' : '<span style="color: #ffc107;">â³ ç­‰å¾…ä¸­</span>'}
                `;
                list.appendChild(div);
            });
        }

        function showGame(room) {
            if (document.getElementById('gameScreen').classList.contains('active')) return;
            
            document.getElementById('lobbyScreen').classList.remove('active');
            document.getElementById('gameScreen').classList.add('active');

            // æ’­æ”¾åŠ‡æœ¬å°ˆå±¬éŸ³æ¨‚
            if (room.script && room.script.music) {
                playMusic(room.script.music);
            }

            const myPlayer = room.players[currentPlayerId];
            if (myPlayer && myPlayer.character) {
                document.getElementById('characterName').textContent = myPlayer.character.name;
                document.getElementById('characterBackground').textContent = myPlayer.character.background;
                document.getElementById('characterSecret').textContent = myPlayer.character.secret;
                
                // é¡¯ç¤ºè§’è‰²åœ–ç‰‡
                if (myPlayer.character.portrait) {
                    const portraitImg = document.getElementById('characterPortrait');
                    portraitImg.src = IMAGE_BASE_URL + myPlayer.character.portrait;
                    portraitImg.style.display = 'block';
                    portraitImg.onerror = function() {
                        this.style.display = 'none'; // å¦‚æœåœ–ç‰‡è¼‰å…¥å¤±æ•—å°±éš±è—
                    };
                }
                
                if (myPlayer.character.goal) {
                    document.getElementById('characterGoal').innerHTML = '<strong>ä½ çš„ç›®æ¨™ï¼š</strong>' + myPlayer.character.goal;
                }
            }

            if (room.script && room.script.questions) {
                const questionList = document.getElementById('questionList');
                questionList.innerHTML = '';
                room.script.questions.forEach(q => {
                    const li = document.createElement('li');
                    li.textContent = q;
                    questionList.appendChild(li);
                });
            }
        }

        function updateGamePhase(room) {
            const script = room.script;
            const currentDay = room.currentDay || 1;
            const currentPhaseIndex = room.currentPhaseIndex || 0;
            
            document.getElementById('dayIndicator').textContent = `ç¬¬ ${currentDay} å¤©`;
            
            const dayData = script.dayPhases.find(d => d.day === currentDay);
            if (!dayData) return;
            
            const currentPhase = dayData.phases[currentPhaseIndex];
            if (!currentPhase) return;
            
            document.getElementById('phaseInfo').textContent = `${currentPhase.name} - ${currentPhase.description}`;
            
            // æª¢æŸ¥æ˜¯å¦æœ‰äº‹ä»¶
            if (dayData.events) {
                const phaseEvent = dayData.events.find(e => e.phase === currentPhase.name);
                if (phaseEvent && !room.eventShown) {
                    showEvent(phaseEvent.content);
                    if (isHost) {
                        update(ref(database, `rooms/${currentRoomId}`), { eventShown: true });
                    }
                }
            }
            
            // å¦‚æœæ˜¯è¨è«–éšæ®µä¸”æ²’æœ‰è¨ˆæ™‚å™¨ï¼Œå•Ÿå‹•è¨ˆæ™‚å™¨
            if (currentPhase.type === 'discussion' && !phaseTimer) {
                startPhaseTimer(currentPhase.duration, currentDay, currentPhaseIndex, dayData.phases.length);
            }
            
            // å¦‚æœæ˜¯æŠ•ç¥¨éšæ®µ
            if (currentPhase.type === 'voting') {
                if (phaseTimer) {
                    clearInterval(phaseTimer);
                    phaseTimer = null;
                }
                showVoting(room.players, room.scriptType, currentDay, script.days);
            }
        }

        function showEvent(content) {
            const eventCard = document.getElementById('eventCard');
            const eventContent = document.getElementById('eventContent');
            
            eventContent.textContent = content;
            eventCard.style.display = 'block';
            
            // 5ç§’å¾Œæ·¡å‡º
            setTimeout(() => {
                eventCard.style.opacity = '0.7';
            }, 5000);
        }

        function startPhaseTimer(seconds, currentDay, currentPhaseIndex, totalPhases) {
            let timeLeft = seconds;
            const timerDiv = document.getElementById('timer');
            
            phaseTimer = setInterval(async () => {
                const minutes = Math.floor(timeLeft / 60);
                const secs = timeLeft % 60;
                timerDiv.textContent = `å€’æ•¸æ™‚é–“ï¼š${minutes}:${secs.toString().padStart(2, '0')}`;
                
                timeLeft--;
                
                if (timeLeft < 0) {
                    clearInterval(phaseTimer);
                    phaseTimer = null;
                    timerDiv.textContent = 'æœ¬éšæ®µçµæŸï¼';
                    
                    // åªæœ‰æˆ¿ä¸»å¯ä»¥æ¨é€²éšæ®µ
                    if (isHost) {
                        const roomRef = ref(database, `rooms/${currentRoomId}`);
                        const snapshot = await get(roomRef);
                        const room = snapshot.val();
                        const script = room.script;
                        
                        const nextPhaseIndex = currentPhaseIndex + 1;
                        const dayData = script.dayPhases.find(d => d.day === currentDay);
                        
                        if (nextPhaseIndex < dayData.phases.length) {
                            // é€²å…¥ä¸‹ä¸€éšæ®µ
                            await update(roomRef, {
                                currentPhaseIndex: nextPhaseIndex,
                                eventShown: false
                            });
                        } else {
                            // é€²å…¥ä¸‹ä¸€å¤©æˆ–çµæŸ
                            if (currentDay < script.days) {
                                await update(roomRef, {
                                    currentDay: currentDay + 1,
                                    currentPhaseIndex: 0,
                                    eventShown: false
                                });
                                // æ¸…é™¤ä¸Šä¸€è¼ªæŠ•ç¥¨
                                const playersRef = ref(database, `rooms/${currentRoomId}/players`);
                                const playersSnapshot = await get(playersRef);
                                const players = playersSnapshot.val();
                                Object.keys(players).forEach(playerId => {
                                    update(ref(database, `rooms/${currentRoomId}/players/${playerId}`), {
                                        vote: null
                                    });
                                });
                                hasVoted = false;
                            }
                        }
                    }
                }
            }, 1000);
        }

        function updateChat(messages) {
            const container = document.getElementById('chatContainer');
            container.innerHTML = '';

            Object.values(messages).sort((a, b) => a.timestamp - b.timestamp).forEach(msg => {
                const div = document.createElement('div');
                div.className = 'message';
                
                const typeLabel = msg.type === 'private' ? '<span class="private">ï¼ˆç§å¯†è¨Šæ¯ï¼‰</span>' : '';
                
                div.innerHTML = `
                    <div class="sender">${msg.sender} ${typeLabel}</div>
                    <div>${msg.text}</div>
                `;
                container.appendChild(div);
            });

            container.scrollTop = container.scrollHeight;
        }

        function showVoting(players, scriptType, currentDay, totalDays) {
            document.getElementById('voteSection').style.display = 'block';
            const buttonsDiv = document.getElementById('voteButtons');
            const promptDiv = document.getElementById('votePrompt');
            
            buttonsDiv.innerHTML = '';

            if (scriptType === 'teen') {
                promptDiv.textContent = 'æ ¹æ“šè¨è«–ï¼Œä½ èªç‚ºèª°çš„è§€é»æœ€æœ‰å•Ÿç™¼æ€§ï¼Ÿæˆ–èª°æœ€éœ€è¦è¢«ç†è§£å’Œæ”¯æŒï¼Ÿ';
            } else {
                if (currentDay < totalDays) {
                    promptDiv.textContent = `ç¬¬ ${currentDay} å¤©æŠ•ç¥¨ï¼šä½ èªç‚ºèª°æœ€å¯ç–‘ï¼Ÿï¼ˆéŠæˆ²å°šæœªçµæŸï¼‰`;
                } else {
                    promptDiv.textContent = 'æœ€çµ‚æŠ•ç¥¨ï¼šæ ¹æ“šæ‰€æœ‰è¨è«–å’Œæ¨ç†ï¼Œä½ èªç‚ºèª°æ˜¯äº‹ä»¶çš„é—œéµäººç‰©æˆ–åŠ å®³è€…ï¼Ÿ';
                }
            }

            Object.values(players).forEach(player => {
                if (player.character) {
                    const btn = document.createElement('button');
                    btn.className = 'vote-button';
                    btn.textContent = player.name + ' (' + player.character.name + ')';
                    btn.onclick = () => vote(player.name);
                    if (hasVoted) btn.disabled = true;
                    buttonsDiv.appendChild(btn);
                }
            });
        }

        async function checkVoteResults() {
            const playersRef = ref(database, `rooms/${currentRoomId}/players`);
            const roomRef = ref(database, `rooms/${currentRoomId}`);
            
            const snapshot = await get(playersRef);
            const roomSnapshot = await get(roomRef);
            
            const players = snapshot.val();
            const room = roomSnapshot.val();

            const votes = {};
            let allVoted = true;

            Object.values(players).forEach(player => {
                if (!player.vote) {
                    allVoted = false;
                } else {
                    votes[player.vote] = (votes[player.vote] || 0) + 1;
                }
            });

            if (allVoted) {
                const script = room.script;
                const currentDay = room.currentDay || 1;
                
                // å¦‚æœä¸æ˜¯æœ€å¾Œä¸€å¤©ï¼Œåªé¡¯ç¤ºæŠ•ç¥¨çµæœï¼Œç¹¼çºŒéŠæˆ²
                if (currentDay < script.days) {
                    const mostVoted = Object.keys(votes).reduce((a, b) => votes[a] > votes[b] ? a : b);
                    
                    const messagesRef = ref(database, `rooms/${currentRoomId}/messages`);
                    await push(messagesRef, {
                        sender: 'ç³»çµ±',
                        text: `ç¬¬ ${currentDay} å¤©æŠ•ç¥¨çµæœï¼š${mostVoted} ç²å¾—æœ€å¤šç¥¨æ•¸ï¼ˆ${votes[mostVoted]} ç¥¨ï¼‰ã€‚éŠæˆ²ç¹¼çºŒ...`,
                        type: 'public',
                        timestamp: Date.now()
                    });
                    
                    return;
                }
                
                // æœ€å¾Œä¸€å¤©ï¼Œé¡¯ç¤ºæœ€çµ‚çµæœ
                showFinalResults(votes, players, room);
            }
        }

        function showFinalResults(votes, players, room) {
            const mostVoted = Object.keys(votes).reduce((a, b) => votes[a] > votes[b] ? a : b);
            const resultDiv = document.getElementById('gameResult');
            resultDiv.style.display = 'block';
            
            // æ’­æ”¾å‹åˆ©/çµæŸéŸ³æ¨‚
            playMusic('victory');

            // é¡¯ç¤ºåŠ‡æœ¬æœ€çµ‚å¤§åœ–
            let finalImageHtml = '';
            if (room.script && room.script.finalImage) {
                finalImageHtml = `<img src="${IMAGE_BASE_URL}${room.script.finalImage}" class="final-image" alt="åŠ‡æœ¬çµå±€åœ–" onerror="this.style.display='none'">`;
            }
            
            if (room.scriptType === 'teen') {
                resultDiv.className = 'alert alert-info';
                resultDiv.innerHTML = `
                    ${finalImageHtml}
                    <h3>ğŸ’­ è¨è«–ç¸½çµ</h3>
                    <p><strong>æœ€å¤šäººé¸æ“‡ï¼š${mostVoted}</strong>ï¼ˆ${votes[mostVoted]} ç¥¨ï¼‰</p>
                    <h4 style="margin-top: 20px;">åŠ‡æƒ…çœŸç›¸ï¼š</h4>
                    <p>${room.script.villain}</p>
                    <h4 style="margin-top: 15px;">é‡é»åæ€ï¼š</h4>
                    <p>é€™å€‹åŠ‡æœ¬æ²’æœ‰ç©å®¶æ‰®æ¼”å£äººï¼Œå› ç‚ºé‡é»åœ¨æ–¼ç†è§£çµæ§‹æ€§å•é¡Œã€ç¤¾æœƒæ–‡åŒ–å’Œåˆ¶åº¦ç¼ºå¤±å¦‚ä½•é€ æˆå‚·å®³ã€‚</p>
                    <p style="margin-top: 10px;">æ¯å€‹è§’è‰²éƒ½ä»£è¡¨äº†ä¸åŒçš„è™•å¢ƒå’Œè¦–è§’ï¼Œå¸Œæœ›é€éè¨è«–è®“å¤§å®¶ç†è§£ï¼š</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        ${room.script.questions.map(q => `<li>${q}</li>`).join('')}
                    </ul>
                `;
            } else {
                const villains = Object.values(players).filter(p => 
                    p.character && p.character.secret && 
                    (p.character.secret.includes('**ä½ æ˜¯') || p.character.secret.includes('**ä½ æ˜¯å¹«å…‡'))
                );
                
                const villainNames = villains.map(v => v.name);
                const foundVillain = villainNames.includes(mostVoted);
                
                if (foundVillain) {
                    resultDiv.className = 'alert alert-success';
                    resultDiv.innerHTML = `
                        ${finalImageHtml}
                        <h3>ğŸ¯ æ¨ç†æˆåŠŸï¼</h3>
                        <p>å¤§å®¶æˆåŠŸæ‰¾å‡ºäº†é—œéµäººç‰©ï¼š<strong>${mostVoted}</strong></p>
                        <h4 style="margin-top: 20px;">çœŸç›¸æ­éœ²ï¼š</h4>
                        <ul style="margin-left: 20px;">
                            ${villains.map(v => `<li><strong>${v.name} (${v.character.name})</strong>: ${v.character.secret}</li>`).join('')}
                        </ul>
                    `;
                } else {
                    resultDiv.className = 'alert alert-warning';
                    resultDiv.innerHTML = `
                        ${finalImageHtml}
                        <h3>ğŸ¤” æ¨ç†å¤±æ•—</h3>
                        <p>æœ€å¤šäººé¸æ“‡ï¼š<strong>${mostVoted}</strong>ï¼ˆ${votes[mostVoted]} ç¥¨ï¼‰</p>
                        <h4 style="margin-top: 20px;">çœŸç›¸æ˜¯ï¼š</h4>
                        <ul style="margin-left: 20px;">
                            ${villains.map(v => `<li><strong>${v.name} (${v.character.name})</strong>: ${v.character.secret}</li>`).join('')}
                        </ul>
                    `;
                }
                
                resultDiv.innerHTML += `
                    <h4 style="margin-top: 20px;">å»¶ä¼¸è¨è«–ï¼š</h4>
                    <ul style="margin-left: 20px;">
                        ${room.script.questions.map(q => `<li>${q}</li>`).join('')}
                    </ul>
                `;
            }

            if (isHost) {
                update(ref(database, `rooms/${currentRoomId}`), { phase: 'ended' });
            }
        }

        // Enter éµç™¼é€è¨Šæ¯
        document.addEventListener('DOMContentLoaded', () => {
            const messageInput = document.getElementById('messageInput');
            if (messageInput) {
                messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessage();
                    }
                });
            }
        });
    </script>
</body>
</html>